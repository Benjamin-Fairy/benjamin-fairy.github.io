(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1afcdb1b"],{4e3:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("a",{class:t.selfclass,attrs:{href:"javascript:;"}},[t.isQuickDownload?[t.showPDFBtn(1)?e("zl-button",{attrs:{type:"line"},on:{click:function(e){t.print_way=1,t.beforePrint()}}},[t._v(t._s(t.mixPDFText))]):t._e(),t._v(" "),t.showPDFBtn(2)?e("zl-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"line"},on:{click:function(e){t.print_way=2,t.beforePrint()}}},[t._v("打印")]):t._e(),t._v(" "),e("el-dialog",{attrs:{visible:t.loading,"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(e){t.loading=e}}},[e("p",{staticStyle:{"text-align":"center"}},[t._v("\n          "+t._s(t.downUrl?"PDF生成成功！":"正在生成PDF，请稍候......")+"\n        ")]),t._v(" "),e("br")])]:e("zl-button",{attrs:{type:"line"},on:{click:t.beforePrint}},[t._v(t._s(t.$t("system.formPrintText")))])],2)},n=[],s=i("9192"),o=(i("a9e3"),i("caad"),i("2532"),i("ac1f"),i("5319"),i("e9c4"),i("99af"),i("1b63"),i("5961")),r=i("e48e"),l=i("2f62"),p={name:"printButton",props:{appId:{type:Number,default:0},formId:{type:Number,default:0},formName:{type:String,default:""},info:{type:Object,default:{}},selfclass:{type:String,default:""},toPdfType:{default:!0}},data:function(){return{loading:!1,downUrl:"",clearBar:null,newTab:void 0,printWay:1}},computed:Object(s["a"])(Object(s["a"])({},Object(l["d"])("matter",["agent_info","exam_depart"])),{},{isQuickDownload:function(){return this.toPdfType&&[2,3].includes(+this.$customHelper.toPdfType(this.appId))},pageInfo:function(){return this.$store.state.form.tablePageInfo[this.formId]}}),methods:{showPDFBtn:function(t){return this.info.print_way?this.info.print_way.includes(t):1==t},openPage:function(){var t={app_id:this.appId||0,inst_id:this.info.inst_id||0,sess_id:this.info.sess_id||0,task_id:this.info.task_id||0,formid:this.formId||0,showprint:this.toPdfType?this.$customHelper.toPdfType(this.appId):1,matterType:this.info.matterType||1,status:this.info.status||"started",type:this.$route.query.type||0};this.$route.query.inst_id&&(t.inst_id=this.$route.query.inst_id),t=Object(s["a"])(Object(s["a"])(Object(s["a"])({},t),this.agent_info),this.exam_depart),window.open(this.$appCommonH.getUrlStr(this.$appConfig.baseUrl+"matter/print",t))},getPageInfo:function(t){var e=this.pageInfo.type;switch(t){case"landscape":return this.$customHelper.getConfigId("formLandscape",this.formId)?this.$customHelper.getConfig("formLandscape",this.formId):-1!==e.indexOf("横版")?"horizontal":"vertical";case"paper":return e.replace("横版","")}return""},beforePrint:function(){if(this.loading)return!1;this.mixNeedHintMethods({appId:this.appId,inst_id:this.info.inst_id})||this.beforeMethods()},beforeMethods:function(){if(this.$listeners["submitBefore"]){if(this.mixGetConfig("mixPrintBeforeSubmit",this.appId))return void this.$emit("submitBefore",{type:"printAutoSubmit"});this.$emit("submitBefore",{type:"print"})}else this.printBaseFn()},printBaseFn:function(){this.isQuickDownload?this.saveDatatoPdf():this.openPage()},saveDatatoPdf:function(){var t=this;this.downUrl="";var e=this.$appCommonH.getUrlStr("".concat(this.$appConfig.apiBaseUrl,"/site/download/pdf"),{inst_id:this.info.inst_id,task_id:this.info.task_id,sess_id:this.info.sess_id,formid:this.formId,app_id:this.appId,draft:"started"==this.info.status?0:1,bpmn_id:this.info.bpmn_id}),i=this.mixToPdfUrl;i=i.replace("https://",this.$customHelper.getConfig("toPdfHttp")||"http://");var a={env:this.$appCommonH.getWebId(),style:{landscape:this.getPageInfo("landscape"),paper:this.getPageInfo("paper"),scale:.96,displayHeaderFooter:"hidden",headerTemplate:"<div></div>",footerTemplate:'\n\t\t\t\t\t\t<div style="font-family: STFangsong; margin-bottom: 2px;font-size: 16px; color: #333;text-align: center;width: 1090%; position: relative;">\n\t\t\t\t\t\t\t<div style="width: 100%;position: absolute; bottom: 0px;">\n\t\t\t\t\t\t\t\t<span class=pageNumber></span>/<span class=totalPages></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>',name:this.formName},url:this.$appCommonH.getUrlStr(i+"cloudprintself/qrcode",Object(s["a"])(Object(s["a"])({app_id:this.appId||0,inst_id:this.info.inst_id||0,sess_id:this.info.sess_id||0,task_id:this.info.task_id||0,formid:this.formId||0,showprint:this.toPdfType?this.$customHelper.toPdfType(this.appId):1,matterType:this.info.matterType||1,status:this.info.status||"started",type:this.$route.query.type||0,isPrintMode:1,isToPdfMode:1,nowTime:(new Date).getTime()},this.agent_info),this.exam_depart))};this.loading=!0,this.$appFetch({url:e,method:"POST",data:{data:JSON.stringify(a)}}).then((function(e){if(e.e)return t.loading=!1,void t.$message.error({message:e.m?e.m:"下载失败",showClose:!1});e.d.fileName?(t.downUrl=t.$appConfig.apiBaseUrl+"/site/download/file-download?pdfName="+e.d.pdfName+"&fileName="+e.d.fileName+"&token="+e.d.token,setTimeout((function(){t.toDown()}),1e3)):t.buildStatus(e.d)})).catch((function(e){t.loading=!1,t.$message.error({message:"下载失败",showClose:!1})}))},buildStatus:function(t){var e=this,i=t.id,a=t.token;this.$appFetch({url:"cDownLoadStatus",method:"POST",data:{id:i}}).then((function(t){1==t.e?setTimeout((function(){e.buildStatus({id:i,token:a})}),1e3):t.e?(e.loading=!1,e.$message.error({message:t.m,showClose:!1})):(e.downUrl=e.$appConfig.apiBaseUrl+"/api/pdf/down?token="+a,("muc"==e.$appConfig.webId&&"394"==e.appId&&"1469"==e.formId||"ucas"==e.$appConfig.webId)&&(e.downUrl+="&form_id="+e.formId),setTimeout((function(){e.toDown()}),1e3))})).catch((function(t){e.loading=!1,clearInterval(e.clearBar),e.$message.error({message:"下载失败",showClose:!1})}))},toDown:function(){this.loading=!1,1==this.print_way?this.$appCommonH.downloadSelfFile(this.downUrl):window.open("".concat(appConfig.staticUrl,"pdfjs/web/viewer.html?file=").concat(encodeURIComponent(this.downUrl),"&toprint=1"))}},mixins:[o["a"],r["a"]]},d=(i("d956"),Object(s["a"])({},p)),m=d,u=i("0b56"),c=Object(u["a"])(m,a,n,!1,null,null,null);e["a"]=c.exports},"702e":function(t,e,i){"use strict";var a=i("9192"),n=i("900a"),s=(i("ac1f"),i("5319"),i("7db0"),i("d3b7"),i("4000"));e["a"]={data:function(){return{mixServiceLink:"/site/service",mixIndexShowRoute:"launch",mixLaunchChangeStatus:1,mixLaunchStatus:1,mixMatterDetailScroll:220,mixShowAddMyAppsBtn:!0,mixShowHandleNum:!0,mixStartHideBreadcrumb:!0,mixshowIndexNav:!0,mixStartExamineSuccessClose:!1,mixShowLookForm:!1,mixBListShowEntrust:!1,mixBNewMatterShowPrinter:!1,mixBNewMatterApplyAuth:!1,mixDetailSetHeight:!0,mixMIndexHidePercent:!0,mixMIndexShowStar:!0,mixExamineUpFileHandle:!0,mixDetailBasicHandle:!0,mixShowDetalViews:!0,mixDepartTreeSearch:"tree",mixStartHideBtn:[],mixStartPCHideSubmit:[],mixStartHideBpmnTab:[],mixLeaveCountryId:[],mixAwayFixed:[],mixHideBtns:[],mixHideMDetailBtn:[],mixHideTipsFormsNum:!0,mixDaiChuLiText:[],mixShowHead:!0,mixSubjectshow:!1,mixMobileShowDownPDF:!0,mixStartWidth:1098,mixApproveStype:{marginTop:"0",paddingTop:"80px"},mixIndexLaunchStyle:{},mixRepeatSubmitText:{default:"不可重复申请"},mixMStartPreviewText:{default:"预览表单"},mixCountersigntext:{default:{btnText:"加签",already:"已加签",people:"加签人员",successAlert:"成功加签",tagText:"的加签",examineAlert:"加签完成",receiptText:"加签回执",finishText:"已加签"}},mixArchivedataCustomExport:{},mixMIndexHeigth:{},mixMExamineTabSort:[1,2,3],mixHidePerson_tel:!1,mixshowindexPics:!0,mixnewMatterShow:["1","2","3","4"],minflowBbox:!1,mixmatterlistStyle:{},mixDetailLeft:[1,2,3,4,5],mixDetailRight:!0,mixAppNow:{default:"立即申请"},mixApplication:{default:"申请说明"},mixLaunchTabs:[{name:"全部",status:0},{name:"进行中",status:1,totalName:"processNum"},{name:"已完结",status:2},{name:"已驳回",status:6},{name:"已终止",status:5},{name:"已撤销",status:3},{name:"草稿",status:4}],mixMStartFormTitle:{default:this.$t("system.m_startForm")},mixDetailSubBtnOrder:{default:[{show:"total"},{show:"btn"}]},mixLaunchSearch:["appSearch","timeSearch","yearSearch"],mixTodoSearch:["appSearch","timeSearch","yearSearch","nameSearch","departSearch","typeSearch"],mixReadSearch:["appSearch","timeSearch","yearSearch","typeSearch","nameSearch"],mixMatterNoService:!0,mixMatterSalaLink:"/site/service",mixAutoSave:{default:!0},mixAutoSaveTime:{default:2e4},mixExamis_bottom:!1,mixDetailDownLoadGuideBtn:{default:!0},mixOverseeSystemUpYear:{default:!1},mixShowThreePrecent:!1,mixMIndexShowFill:!0,mixMatterAddDetailField:!1,mixMatterEditShowLog:!1,mixNewMatterShowLogo:!0,mixHideHandle_Look:[],mixNewMatterDetail:!1,mixShowProcessTrack:!0,mixShowMobileDepart:!0,mixgetFormTipApi:"getFormTip",mixBackInstDrafStatus:1,mixNoLoginClass:"button_gray",mixLaunchListTarget:"_self",mixStyleMeans:{default:""},mixServiceDepartBtn:{default:!0},mixDetaillErrorHint:{default:0},mixExamineButtonNum:{default:2},mixShowMatterLog:{default:!0},mixStartButtonPrvText:{default:"上一步"},mixStartButtonNextText:{default:"下一步"},mixSetOrder:{default:["operate","notify","uploading","writeOpinion","useOpinion"]},mixExamineUploading:{default:""},mixisShowOpinion:{default:!1},mixWritePlaceholder:{default:"请输入书写意见"},mixWhethEremptyMsg:{default:!0},mixShowUploadBtn:{default:!0},mixBatchCommentIsRequired:{default:!1},mixDownloadPDFText:{default:"下载PDF"},mixRevokeTip:"撤销后将无法继续该事项，所有已填写信息将不保留，是否确定要撤销？",mixMatterTodoOpenBlank:!0,mixRejectIsShowPrint:{default:!0},mixFinishTodoIsShowPrint:{default:!0},mixSetFormText:{default:""},mixStartLoadDrafIsShow:{default:!0},mixIsSaveDrafId:{default:!1},mixPrintBeforeSubmit:{default:!1}}},components:{mixSupportDepartCom:{template:"\n      <p>\n        <span style=\"font-weight: 700;\">服务对象：</span>{{ identity.join('；') }}</span>\n      </p>\n      ",props:["identity"]},mixServiceObjectCom:{template:"<em></em>"},mixMoveTipsCom:{template:"<em></em>"},mixAgentDealCom:{template:'\n      <el-button id="toEntrust" @click ="toEntrust" plain>委托设置</el-button>\n      ',methods:{toEntrust:function(){this.$router.push({path:"/site/ucenter",query:{showroute:"committalCharge"}})}}},mixMatterLaunchTabCom:{template:'\n      <div class="list-run">\n        <ul>\n          <li @click="handleStatus(0)" :class="{backBlueB: changeStatus==\'0\'}">全部</li>\n          <li @click="handleStatus(1)" :class="{backBlueB: changeStatus==\'1\'}">\n            进行中\n            <span v-if="processNum != 0">{{processNum.length > 2 ? \'...\' : processNum}}</span>\n          </li>\n          <li @click="handleStatus(2)" :class="{backBlueB: changeStatus==\'2\'}">已完成</li>\n          <li @click="handleStatus(3)" :class="{backBlueB: changeStatus==\'3\'}">已撤销</li>\n          <li @click="handleStatus(4)" :class="{backBlueB: changeStatus==\'4\'}">草稿</li>\n        </ul>\n      </div>\n      ',props:["changeStatus","processNum"],methods:{handleStatus:function(t){this.$emit("handleStatus",t)}}},mixthirdMatterLogoCom:{template:"\n      <img :src=\"$appConfig.staticUrl + 'img/third.jpg'\" alt />\n      "},mixMatterLogoCom:{template:'\n      <img :src="data.logo" alt />\n      ',props:["data"]},mixMatterTodoTabCom:{template:'\n      <div class="list-run">\n        <ul>\n          <li @click="handleStatus(0)" :class="{backBlueB:changeStatus==\'0\'}">\n            全部\n          </li>\n          <li @click="handleStatus(1)" :class="{backBlueB:changeStatus==\'1\'}">\n            待处理\n            <span v-if="pendingTotal != 0">{{pendingTotal.length > 2 ? \'...\' : pendingTotal}}</span>\n          </li>\n          <li @click="handleStatus(3)" :class="{backBlueB:changeStatus==\'3\'}">\n            已处理\n          </li>\n          <li v-if="batchApps.length" @click="handleStatus(4)" :class="{backBlueB:changeStatus==\'4\'}">\n            批量处理\n          </li>\t\t\t\t\n        </ul>\n      </div>\n      ',props:["changeStatus","pendingTotal","batchApps"],methods:{handleStatus:function(t){this.$emit("handleStatus",t)}}},mixTodoThirdToCom:{template:'\n      <a\n        :href="data.thirdparty_form_url_view"\n        target="_blank"\n      >\n        <i class="iconfont iconchakan"></i>\n        {{data.task_status == 0 || data.task_status == 1 ? \'处理事项\' : \'查看表单\'}}\n      </a>\n      ',props:["data"]},mixMdetailNum:{template:'\n      <div class="detail_data">\n        <div class="come" v-if="data.handling_times && data.handling_times != \'\'">\n          <p>\n            <span class="T">{{ data.handling_times | getNum }}</span>\n            {{ data.handling_times | getText }}\n          </p>\n          <p>到办事现场次数</p>\n        </div>\n        <div class="times" v-if="data.term && data.term != \'\'">\n          <p>\n            <span class="T">{{ data.term | getNum }}</span>\n            {{ data.term | getText }}\n          </p>\n          <p>办理时限</p>\n        </div>\n        <div class="getPersonal" v-if="!mixHideHandle_Look.includes(app_id)">\n          <p>\n            <span class="T">{{ data.times }}</span\n            >次\n          </p>\n          <p>办理人次</p>\n        </div>\n        <div class="lookPersonal" v-if="!mixHideHandle_Look.includes(app_id)">\n          <p>\n            <span class="T">{{ data.views }}</span\n            >次\n          </p>\n          <p>浏览人次</p>\n        </div>\n      </div>\n      ',props:["data","app_id","mixHideHandle_Look"],filters:{getNum:function(t){return parseInt(t)?parseInt(t):t},getText:function(t){return parseInt(t)?t.replace(/[^\u4e00-\u9fa5]/gi,""):""}}},mixMatterMDetailCom:{template:'\n      <ul v-else>\n        <li class="appname">{{detail.name}}</li>\n        <li>\n          <span>已办理{{detail.times}}人</span>&nbsp;&nbsp;&nbsp;\n          <span>累计访问{{detail.views}}人</span>\n        </li>\n        <li v-if="detail.depart && detail.depart.length">\n          <span>服务部门：</span>\n          &nbsp;\n          <span class="appdepart">{{detail.depart.join(\'；\')}}</span>\n        </li>\n        <li>\n          <span>起始时间：</span>\n          &nbsp;\n          <span\n            class="apptime"\n          >{{detail.during_lower == null?\'无限制\':detail.during_lower}}</span>\n        </li>\n      </ul>\n      ',props:["detail"]},mixMLaunchNavCom:{template:'\n      <ul class="launchList_nav">\n        <li @click="changeStatus(0)" :class="{active:status==0}">\n          全部\n        </li>\n        <li @click="changeStatus(1)" :class="{active:status==1}">\n          进行中\n          <span v-if="processNum!=0">{{processNum}}</span>\n        </li>\n        <li @click="changeStatus(2)" :class="{active:status==2}">\n          已完成\n        </li>\n        <li @click="changeStatus(6)" :class="{active:status==6}">\n          已驳回\n        </li>\n        <li @click="changeStatus(3)" :class="{active:status==3}">\n          已撤销\n        </li>\n        <li @click="changeStatus(4)" :class="{active:status==4}">\n          草稿\n        </li>\n      </ul>\n      ',props:["processNum","status"],methods:{changeStatus:function(t){this.$emit("changeStatus",t)}}},mixMIndexLaunchNavCom:{template:'\n      <div v-else class="myNotify_classify">\n        <ul style="padding: 0 0.3rem;">\n          <li @click="changeStatus(0)" :class="{active:status==0}">\n            全部\n          </li>\n          <li @click="changeStatus(1)" :class="{active:status==1}">\n            进行中\n          </li>\n          <li @click="changeStatus(2)" :class="{active:status==2}">\n            已完成\n          </li>\n          <li @click="changeStatus(3)" :class="{active:status==3}">\n            已撤销\n          </li>\n          <li @click="changeStatus(4)" :class="{active:status==4}">\n            草稿\n          </li>\n        </ul>\n      </div>\n      ',props:["processNum","status"],methods:{changeStatus:function(t){this.$emit("changeStatus",t)}}},mixMTodoToExamineBtnCom:{template:"\n      <button :class=\"item.task_status == 0 || item.task_status == 1 ? 'examine' : 'see'\" @click=\"toexamine\">\n        {{item.task_status == 0 || item.task_status == 1 ? '处理事项' : '查看表单'}}\n      </button>\n      ",props:["item"],methods:{toexamine:function(){this.$emit("toexamine")}}},mixExaminePrintBtnCom:{template:'\n      <printButton\n        class="print_button"\n        :appId="+appInfo.app_id" \n        :formId="formId" \n        :formName="formName"\n        :info=\'{\n          inst_id: appInfo.inst && appInfo.inst.inst_id,\n          sess_id: appInfo.inst && appInfo.inst.sess_id,\n          task_id: taskId,\n          matterType: matterType,\n          status: "started",\n          bpmn_id: appInfo.bpmn_id,\n          print_way: appInfo.print_way\n        }\'>\n      </printButton>\n      ',props:{appInfo:{default:{}},formId:{},formName:{},taskId:{},matterType:{}},components:{printButton:s["a"]}},mixDetailSupportTipCom:{template:""}},computed:{mixStartIsShowBtns:function(){return!0}},methods:{mixGetConfig:function(t,e){return this[t]&&void 0!=this[t][e]?this[t][e]:this[t].default},mixGetIsShow:function(t,e){return!this[t]||1!=this[t][e]&&0!=this[t][e]?this[t].default:this[t][e]},mixSetTime:function(t){return t},mixShowRepealTo:function(){this.$router.push({path:"/matter/launch"})},mixShowTakeTo:function(){1==window.history.length?("undefined"===typeof WeixinJSBridge?"undefined":Object(n["a"])(WeixinJSBridge))+""!="undefined"?WeixinJSBridge.call("closeWindow"):window.close():window.history.back(-1)},mixExamineSuccessTo:function(){var t="",e={};switch(this.type){case"launch":t="/matter/launch";break;case"todo":t="/matter/todo";break;case"oversee":t="/matter/overseeTask",e={appId:this.appInfo.app_id};break;case"read":t="/matter/read";break;case"reject":t="/matter/launch";break}7==this.$route.query.appType?t="/reserve/dispatchManage":8==this.$route.query.appType&&(t="/reserve/incomingManage"),this.$router.push({path:t,query:Object(a["a"])({changeStatus:this.changeStatus?this.changeStatus:void 0},e)})},mixStartSuccessTo:function(t){if(t){if(this.isBsu)return this.$router.push("/matter/fill"),!1;this.$router.push("/matter/launch")}else this.$router.push({path:"/matter/m_launch",query:{type:1,isOutSite:this.$route.query.isOutSite||""}})},mixMExamineSuccessTo:function(t){"launch"==t?this.$router.push({path:"/matter/m_launch",query:{type:this.$route.query.changeStatus}}):this.$router.push({path:"/matter/m_index",query:{page:t,changeStatus:void 0==this.$route.query.changeStatus?"1":this.$route.query.changeStatus}})},mixViewminBottom:function(){$(".serviceApplu-main .main-middle").css("min-height",document.body.clientHeight-198+"px")},mixLaunchToservice:function(){this.$router.push({path:"/site/service"})},mixTerminationMethods:function(){return!1},mixGetChoseOperate:function(t,e){var i=e.find((function(t){return t.select}));return i?i.value:""},mixNoSaveDraft:function(t){return t}}}},d956:function(t,e,i){},e673:function(t,e,i){"use strict";e["a"]={}}}]);