(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b52a97a"],{"19c7":function(t,e,s){},4444:function(t,e,s){},"445c":function(t,e,s){},"5d16":function(t,e,s){"use strict";s("445c")},"679b":function(t,e,s){},"6abf":function(t,e,s){"use strict";s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"next_node_layer layer_com"},[t.nodeDatas.length?e("div",{staticClass:"con",staticStyle:{height:"400px"}},[e("div",{staticClass:"layer_tit"},[t._v("\n        "+t._s(t.mixGetConfig("mixNextNodeTitleText",t.appId))+"\n      ")]),t._v(" "),e("ul",{staticClass:"c_tab"},[t._l(t.nodeDatas,(function(s,a){return e("li",{class:{active:a==t.nowIndex},on:{click:function(e){return t.changeIndex(a)}}},[t._v("\n          "+t._s(s.node_name)+"\n        ")])})),t._v(" "),t.isDisabled||!t.nodeDatas[this.nowIndex].limitNumber?e("el-checkbox",{staticStyle:{float:"right"},attrs:{disabled:t.isDisabled,"true-value":!0,"false-value":!1},on:{change:function(e){return t.allselectChange(t.allselect)}},model:{value:t.allselect,callback:function(e){t.allselect=e},expression:"allselect"}},[t._v("全选")]):t._e()],2),t._v(" "),t.$appCommonH.isEmptyObj(t.selectNodeUid)?t._e():t._l(t.nodeDatas,(function(s,a){return a==t.nowIndex&&t.selectNodeUid[s.node_key]?e("ul",{staticClass:"user_list"},[e("el-checkbox-group",{on:{change:t.controlNumber},model:{value:t.selectNodeUid[s.node_key],callback:function(e){t.$set(t.selectNodeUid,s.node_key,e)},expression:"selectNodeUid[nodeData.node_key]"}},t._l(s.users,(function(a){return e("li",[e("el-checkbox",{attrs:{disabled:t.isDisabled,label:a.uid}},[e("span",{staticClass:"user_name"},[t._v(t._s(a.name))]),t._v("\n                 \n                "),t.isShowDepartName||!t.isShowDepartName&&"校领导"!==s.node_name?e("span",{staticClass:"depart_name",attrs:{title:a.depart_name}},[t._v(t._s(a.depart_name))]):t._e()])],1)})),0)],1):t._e()})),t._v(" "),e("div",{staticClass:"layer_btn"},[t._l(t.nodeDatas,(function(s,a){return a==t.nowIndex&&void 0!==t.sms_send[s.node_key]?e("p",{staticClass:"checked"},[e("el-checkbox",{attrs:{"true-value":1,"false-value":0},model:{value:t.sms_send[s.node_key],callback:function(e){t.$set(t.sms_send,s.node_key,e)},expression:"sms_send[nodeData.node_key]"}},[t._v("给办理人员发送短信")])],1):t._e()})),t._v(" "),e("div",{staticClass:"btn",staticStyle:{position:"absolute",bottom:"24px",right:"18px",margin:"0px"}},[e("p",[t._v(t._s(t.tips))]),t._v(" "),e("zl-button",{attrs:{type:"line"},on:{click:function(e){return t.updateInfo(!1)}}},[t._v("返回修改")]),t._v("\n            \n          "),e("zl-button",{attrs:{widthType:"fixed"},on:{click:function(e){return t.updateInfo(!0)}}},[t._v("确定")])],1)],2)],2):t._e()])},i=[],n=s("9192"),o=(s("d81d"),s("d3b7"),s("159b"),s("caad"),s("2532"),s("fb6a"),s("2f62")),r=s("5961"),c=s("e48e"),l={name:"nextNode",data:function(){return{selectNodeUid:{},sms_send:{},nowIndex:0,allselect:!1,fallselect:!1}},props:["setinfo","appId"],computed:Object(n["a"])(Object(n["a"])({},Object(o["d"])("matter",["nodeDatas"])),{},{isDisabled:function(){return!this.nodeDatas[this.nowIndex].special_approver},tips:function(){return this.nodeDatas&&this.nodeDatas.length&&this.mixNextNodeTips[this.appId]?this.mixNextNodeTips[this.appId][this.nodeDatas[0].node_key]:""}}),mounted:function(){var t=this;this.selectNodeUid=this.$appCommonH.copyObj(this.$store.state.matter.selectNodeUid),this.sms_send=this.$appCommonH.copyObj(this.$store.state.matter.sms_send),this.nodeDatas.map((function(e){return e.special_approver?t.selectNodeUid[e.node_key]=[]:""}))},methods:Object(n["a"])(Object(n["a"])({},Object(o["c"])("matter",["SET_NODEDATAS","SET_SELECTUIDS","SET_SMSSEND"])),{},{updateInfo:function(t){this.SET_SELECTUIDS(this.selectNodeUid),this.SET_SMSSEND(this.sms_send),this.$emit("setinfo",t)},allselectChange:function(t){var e={},s=this;this.nodeDatas.forEach((function(a,i){if(i!==s.nowIndex)return!1;e[a.node_key]=[],a.users.forEach((function(s){t&&e[a.node_key].push(s.uid)}))})),this.selectNodeUid=Object(n["a"])(Object(n["a"])({},this.selectNodeUid),e)},fallselectChange:function(){var t={},e=this;this.nodeDatas.forEach((function(s,a){if(a!==e.nowIndex)return!1;t[s.node_key]=[],s.users.forEach((function(a){e.selectNodeUid[s.node_key].includes(a.uid)||t[s.node_key].push(a.uid)}))})),this.selectNodeUid=Object(n["a"])(Object(n["a"])({},this.selectNodeUid),t)},changeIndex:function(t){this.nowIndex=t,this.controlNumber()},controlNumber:function(){for(var t=0;t<this.nodeDatas.length;t++){var e=this.nodeDatas[t];if(e.special_approver&&e.limitNumber){e.limitNumber&&this.selectNodeUid[e.node_key].length-e.maxNumber>0&&(this.selectNodeUid[e.node_key]=this.selectNodeUid[e.node_key].slice(this.selectNodeUid[e.node_key].length-e.maxNumber,this.selectNodeUid[e.node_key].length));for(var s=0;s<e.users.length;s++)e.limitNumber&&this.selectNodeUid[e.node_key].length<e.minNumber&&!this.selectNodeUid[e.node_key].includes(e.users[s].uid)&&this.selectNodeUid[e.node_key].push(e.users[s].uid)}}this.selectNodeUid[this.nodeDatas[this.nowIndex].node_key].length!=this.nodeDatas[this.nowIndex].users.length?this.allselect=!1:this.allselect=!0}}),watch:{appId:function(){console.log(this.appId)}},mixins:[r["a"],c["a"]]},d=(s("19c7"),Object(n["a"])({},l)),h=d,p=s("0b56"),_=Object(p["a"])(h,a,i,!1,null,null,null);e["a"]=_.exports},"6efe":function(t,e,s){"use strict";e["a"]={data:function(){return{mixTwoMenuShow:!1,mixShowMessageInTask:!1,mixshowTitleText:!1,mixMatterNavList:[{name:"我的申请",path:"/matter/launch",authKey:"inst-list"},{name:this.$t("system.myTodoTit"),path:"/matter/todo",authKey:"my-todo"},{name:"我的知会",path:"/matter/read",authKey:"my-read"},{name:"我的填报",path:"/matter/fill",authKey:"tb-task"}],mixShowProcessTrack:!0,mixRepeatStartText:"已有进行中事项，不可重复发起"}},methods:{getActiveUser:function(){}}}},"8c64":function(t,e,s){},"9a2b":function(t,e,s){},"9fc3":function(t,e,s){},bc91:function(t,e,s){"use strict";var a=s("4caf"),i=s("7b38");e["a"]={data:function(){return{mixPickerOptionstime:{disabledDate:function(t){return!1}},mixSystemUpYear:[],mixAppNames:[]}},created:function(){this.mixGetSystemUpYear(),this.$route.query.changeStatus&&(this.status=this.$route.query.changeStatus)},methods:{mixGetSystemUpYear:function(){var t=this;this.$appFetch({url:"systemUpYear",method:"get"}).then((function(e){e.e?t.$message({type:"error",message:e.m}):t.mixSystemUpYear=e.d}))},mixGetProcessAppNames:function(t){var e=this;this.$appFetch({url:"getProcessAppNames",method:"get",data:{type:t}}).then((function(t){t.e?e.$message({type:"error",message:t.m}):e.mixAppNames=t.d})).catch((function(t){e.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮"})}))},mixTimeFocus:function(){var t=this;this.searchP.y?this.mixPickerOptionstime={disabledDate:function(e){return e.getTime()<new Date(t.searchP.y+"-1-1 00:00:00").getTime()||e.getTime()>new Date(t.searchP.y+"-12-31 01:00:00").getTime()}}:this.mixPickerOptionstime={disabledDate:function(t){return!1}}},mixYearChange:function(){this.searchP.y&&(this.searchP.time_lower="",this.searchP.time_upper="")},mixShowProcessLogPop:function(t,e){this.$refs.mixProcessLogPopCom.show(t.inst_id,t.app_id,e,t.app_name)},mixShowFlowchartBtn:function(t){return!t||(t instanceof Array?!t.length||t[0].view_flowchart:t.view_flowchart)},mixShowProcessSvgPop:function(t){this.$refs.mixProcessSvgPopCom.show(t)},mixSyncTaskList:function(t){var e=this,s=this.$loading({lock:!0,text:"数据同步中，请稍候... ",background:"rgba(0, 0, 0, 0.5)"});this.$appFetch({url:t,method:"get"}).then((function(t){s.close(),t.e&&e.$message({type:"error",message:t.m})})).catch((function(t){e.$message.error({message:t})}))}},components:{mixProcessLogPopCom:a["a"],mixProcessSvgPopCom:i["a"]}}},ced5:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"depar_search"},[e("el-popover",{attrs:{placement:"bottom",trigger:"manual","popper-class":"depar_search_popover depar_search_popover_".concat(t.randomNum)},model:{value:t.treeShow,callback:function(e){t.treeShow=e},expression:"treeShow"}},[e("div",{staticClass:"depar_search_tree"},[e("el-tree",{ref:"eltrees",attrs:{props:t.props,data:t.department,"node-key":"id","check-on-click-node":!0,"default-expanded-keys":[1],"highlight-current":!0,"current-node-key":t.id,"expand-on-click-node":!1,"filter-node-method":t.filterNode},on:{"node-click":t.selectDepart},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.node,i=s.data;return e("span",{staticClass:"custom-tree-node"},[e("span",{class:{disabled:"read"==i.auth||"hidden"==i.auth}},[t._v(t._s(a.label))])])}}])})],1),t._v(" "),e("div",{staticClass:"depar_search_div1",attrs:{slot:"reference",id:"depar_search_div1_".concat(t.randomNum)},slot:"reference"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterText,expression:"filterText"}],attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.filterText},on:{click:t.focus,input:function(e){e.target.composing||(t.filterText=e.target.value)}}}),t._v(" "),String(this.id)?e("i",{staticClass:"el-icon-error",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}}):t._e(),t._v(" "),e("i",{staticClass:"el-icon-arrow-down",class:{acitve:this.id}})])])],1)},i=[],n=s("9192"),o=(s("caad"),s("2532"),s("a434"),s("d3b7"),s("159b"),s("b0c0"),s("4de4"),{data:function(){return{treeShow:!1,props:{label:"name",children:"children"},filterText:"",placeholder:"",department:[],randomNum:Math.floor(1e4*Math.random())}},props:{id:{},valueType:{type:String,default:"name"},api:{type:String},params:{type:Object},placeholders:{type:String,default:"搜索部门名称"},name:{type:String,default:""},hiddenDepart:{type:Array,default:[]}},created:function(){var t=this;this.placeholder=this.placeholders,this.allDpmt((function(){t.id&&(t.initInfo(t.department),t.filterText||t.close())}))},mounted:function(){var t=this;$(document).click((function(e){var s=$(".depar_search_popover_".concat(t.randomNum)),a=$("#depar_search_div1_".concat(t.randomNum));s.is(e.target)||0!==s.has(e.target).length||a.is(e.target)||0!==a.has(e.target).length||(t.treeShow=!1,t.placeholder!=t.placeholders&&(t.filterText=t.placeholder))})),this.placeholder=this.placeholders||""},methods:{allDpmt:function(t){var e=this;if(this.department.length)return t(),!1;var s=this.api||"getDepartNews",a=this.params||{auth:"backauth"};this.$appFetch({method:"get",url:s,data:a},(function(s){if(0==s.e){e.department=s.d;for(var a=e.department[0].children.length-1;a>=0;a--)e.hiddenDepart.includes(e.department[0].children[a].id)&&e.department[0].children.splice(a,1);e.department[0].disabled=!0,t()}else self.$message.error({message:s.m})}))},initInfo:function(t){var e=this;t.forEach((function(t){t[e.valueType]==e.id&&e.selectDepart(t),t.children&&t.children.length&&e.initInfo(t.children)}))},selectDepart:function(t){"read"!=t.auth&&"hidden"!=t.auth&&(this.$emit("update:id",t[this.valueType]),this.$emit("update:name",t["name"]),this.$emit("change",t[this.valueType]),this.treeShow=!1,this.filterText=t.name,this.placeholder=this.placeholders||"")},focus:function(){this.treeShow=!this.treeShow,this.treeShow?(this.placeholder=this.filterText,this.filterText=""):(this.filterText=this.placeholder,$(".depar_search_div1 input").blur())},filterNode:function(t,e){return!this.filterText||-1!==e.name.indexOf(this.filterText)},close:function(){this.filterText="",this.placeholder=this.placeholders||"",this.$emit("update:id",""),this.$emit("update:name",""),this.$emit("change","")}},watch:{filterText:function(t){this.$refs.eltrees.filter(t)},id:function(t){""===t&&this.close()}}}),r=(s("9fc3"),Object(n["a"])({name:"departSearch"},o)),c=r,l=s("0b56"),d=Object(l["a"])(c,a,i,!1,null,null,null);e["a"]=d.exports},e87b:function(t,e,s){"use strict";e["a"]={}},e9e4:function(t,e,s){"use strict";s("d3b7"),s("99af");var a=s("1b63"),i=function(t,e,s,i){return new Promise((function(n,o){var r=new FormData;r.append("upfile",t),s=s||"uploadindex",s=a["a"].getApi(s),i=i||{};var c=new XMLHttpRequest;c.open("post","".concat(s,"?category=").concat(e)+(i.inst_id?"&inst_id="+i.inst_id:"")),c.send(r),c.onload=function(t){try{var e=JSON.parse(t.currentTarget.response);"SUCCESS"==e.state?n(e):o(e)}catch(s){o(s)}}}))};e["a"]=i},fdee:function(t,e,s){"use strict";s.r(e);s("b0c0"),s("caad"),s("2532"),s("5377"),s("498a"),s("ac1f"),s("841c"),s("99af");var a=function(){var t=this,e=t._self._c;return e("layoutTwo",[e("div",{attrs:{id:"todo"}},[e("div",{staticClass:"todo_top"},[e("div",{staticClass:"content_w"},[e("matterNav"),t._v(" "),e("ul",{staticClass:"todo_top_tab"},[t._l(t.tabs,(function(s,a){return[t.isShowTab(s.status)?e("li",{key:a,class:{active:s.status==t.status},on:{click:function(e){return t.changeStatus(s.status)}}},[t._v("\n                "+t._s(s.name)+"\n                "),s.totalName&&t.todoNums[s.totalName]?e("i",[t._v("("+t._s(t.todoNums[s.totalName])+")")]):t._e()]):t._e()]})),t._v(" "),"yes"==t.siteConfig.system_setting.task_sync?e("a",{staticClass:"syncTaskBtn",attrs:{href:"javascript:;"},on:{click:function(e){return t.mixSyncTaskList(t.siteConfig.system_setting.task_sync_url)}}},[t._v("\n              "+t._s(t.siteConfig.system_setting.task_sync_button_text)+"\n            ")]):t._e()],2)],1)]),t._v(" "),4!=t.status&&2!=t.status?e("div",{staticClass:"content_w todo_search",class:{active_log:t.batchApps.length&&3==t.status}},[e("div",{staticClass:"todo_search_option"},[(t.batchApps.length||t.batchRecord.length)&&3==t.status?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.showBatchRecordCom=!0}}},[t._v("\n            "+t._s(t.$t("system.matterTodoBatch"))+"记录\n            "),e("i",{staticClass:"el-icon-arrow-right"})]):t._e(),t._v(" "),e("div",[t.mixTodoSearch.includes("appSearch")?[e("span",{staticClass:"option_title"},[t._v(t._s(t.statusText)+t._s(t.$t("system.matterTodoReminder"))+"的服务")]),t._v(" "),e("el-select",{staticClass:"option_1 option_margin",attrs:{placeholder:"请选择",filterable:"",size:"small"},model:{value:t.searchP.app_id,callback:function(e){t.$set(t.searchP,"app_id",e)},expression:"searchP.app_id"}},t._l(t.mixAppNames,(function(t,s){return e("el-option",{key:s,attrs:{label:t,value:s}})})),1)]:t._e(),t._v(" "),t.mixTodoSearch.includes("timeSearch")?[e("el-select",{staticClass:"option_2",attrs:{placeholder:"请选择",size:"small"},model:{value:t.searchP.time_type,callback:function(e){t.$set(t.searchP,"time_type",e)},expression:"searchP.time_type"}},[e("el-option",{attrs:{label:"到达时间",value:0}}),t._v(" "),e("el-option",{attrs:{label:"提交时间",value:2}}),t._v(" "),1!=t.status?e("el-option",{attrs:{label:"处理时间",value:1}}):t._e()],1),t._v(" "),e("el-date-picker",{staticClass:"option_3 option_4",attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期",size:"small","picker-options":t.mixPickerOptionstime},on:{focus:t.mixTimeFocus},model:{value:t.searchP.time_lower,callback:function(e){t.$set(t.searchP,"time_lower",e)},expression:"searchP.time_lower"}}),t._v(" "),e("span",{staticClass:"line"}),t._v(" "),e("el-date-picker",{staticClass:"option_4 option_margin",attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期",size:"small","picker-options":t.mixPickerOptionstime},on:{focus:t.mixTimeFocus},model:{value:t.searchP.time_upper,callback:function(e){t.$set(t.searchP,"time_upper",e)},expression:"searchP.time_upper"}})]:t._e(),t._v(" "),t.mixTodoSearch.includes("typeSearch")?[e("span",{staticClass:"option_title"},[t._v("任务类型")]),t._v(" "),e("el-select",{staticClass:"option_5 option_margin",attrs:{placeholder:"请选择",size:"small"},model:{value:t.searchP.flags,callback:function(e){t.$set(t.searchP,"flags",e)},expression:"searchP.flags"}},[e("el-option",{attrs:{label:"全部类型",value:""}}),t._v(" "),e("el-option",{attrs:{label:"催办",value:[1]}}),t._v(" "),e("el-option",{attrs:{label:"代办",value:[2]}}),t._v(" "),e("el-option",{attrs:{label:"紧急",value:[3]}}),t._v(" "),e("el-option",{attrs:{label:"加签",value:[4]}}),t._v(" "),3!=t.status?e("el-option",{attrs:{label:"驳回",value:[5]}}):t._e()],1)]:t._e()],2),t._v(" "),e("div",[t.mixTodoSearch.includes("nameSearch")?[e("span",{staticClass:"option_title"},[t._v(t._s(t.$t("system.matterNameOrNum")))]),t._v(" "),e("el-input",{staticClass:"option_1 option_margin",attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.searchP.keyword,callback:function(e){t.$set(t.searchP,"keyword","string"===typeof e?e.trim():e)},expression:"searchP.keyword"}})]:t._e(),t._v(" "),t.mixTodoSearch.includes("departSearch")?[e("span",{staticClass:"option_title"},[t._v("发起人部门")]),t._v(" "),"tree"==t.mixDepartTreeSearch?e("departSearch",{staticClass:"option_margin",attrs:{valueType:"id",id:t.searchP.department_id},on:{"update:id":function(e){return t.$set(t.searchP,"department_id",e)}}}):"select"==t.mixDepartTreeSearch?e("el-select",{staticClass:"depar_search",attrs:{placeholder:"请选择部门",size:"small"},model:{value:t.searchP.department_id,callback:function(e){t.$set(t.searchP,"department_id",e)},expression:"searchP.department_id"}},t._l(t.departNameList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1):t._e()]:t._e(),t._v(" "),t.mixTodoSearch.includes("yearSearch")?[e("span",{staticClass:"option_title"},[t._v("提交年份")]),t._v(" "),e("el-select",{staticClass:"option_5",attrs:{placeholder:"请选择",size:"small"},on:{change:t.mixYearChange},model:{value:t.searchP.y,callback:function(e){t.$set(t.searchP,"y",e)},expression:"searchP.y"}},t._l(t.mixSystemUpYear,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)]:t._e()],2),t._v(" "),e("div",[t.mixTodoSearch.includes("task_name")&&t.showTaskName?[e("span",{staticClass:"option_title"},[t._v("任务名称")]),t._v(" "),e("el-input",{staticClass:"option_1 option_margin",attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.searchP.task_name,callback:function(e){t.$set(t.searchP,"task_name","string"===typeof e?e.trim():e)},expression:"searchP.task_name"}})]:t._e(),t._v(" "),e("span",{staticClass:"option_title"},[t._v("任务排序")]),t._v(" "),e("el-select",{staticClass:"option_1 option_margin",attrs:{placeholder:"请选择",size:"small"},model:{value:t.searchP.orderby,callback:function(e){t.$set(t.searchP,"orderby",e)},expression:"searchP.orderby"}},[e("el-option",{attrs:{label:3==t.status||8==t.status?"任务处理时间倒序":"任务到达时间倒序",value:"createdDesc"}}),t._v(" "),e("el-option",{attrs:{label:3==t.status||8==t.status?"任务处理时间正序":"任务到达时间正序",value:"createdAsc"}})],1),t._v(" "),t.mixTodoSearch.includes("className")?[e("span",{staticClass:"option_title"},[t._v("发起人班级")]),t._v(" "),e("el-select",{staticClass:"option_1 option_margin",attrs:{size:"small",placeholder:"请选择发起人班级",filterable:"",clearable:""},model:{value:t.searchP.class_name,callback:function(e){t.$set(t.searchP,"class_name",e)},expression:"searchP.class_name"}},t._l(t.classNameList,(function(t,s){return e("el-option",{key:s,attrs:{label:t,value:t}})})),1)]:t._e()],2)]),t._v(" "),e("div",[e("zlButton",{attrs:{widthType:"fixed",type:"reset"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:t.search}},[t._v("查询")])],1)]):e("div",{staticClass:"content_w todo_search acitve"},[e("div",{staticClass:"todo_search_option"},[e("div",[e("span",{staticClass:"option_title"},[t._v("事项名称")]),t._v(" "),4==t.status?e("el-select",{staticClass:"option_1 option_margin",attrs:{placeholder:"请选择",size:"small"},on:{change:t.batchAppChange},model:{value:t.batchSearchP.appId,callback:function(e){t.$set(t.batchSearchP,"appId",e)},expression:"batchSearchP.appId"}},t._l(t.batchApps,(function(t){return e("el-option",{key:"".concat(t.id,"_").concat(t.bpmn_id),attrs:{label:t.name,value:"".concat(t.id,"_").concat(t.bpmn_id)}})})),1):t._e(),t._v(" "),2==t.status?e("el-select",{staticClass:"option_1 option_margin",attrs:{placeholder:"请选择",size:"small"},on:{change:t.thirdAppChange},model:{value:t.thirdSearchP.appId,callback:function(e){t.$set(t.thirdSearchP,"appId",e)},expression:"thirdSearchP.appId"}},t._l(t.thirdApps,(function(t,s){return e("el-option",{key:s,attrs:{label:t.label,value:t.value}})})),1):t._e(),t._v(" "),e("span",{staticClass:"option_title"},[t._v("审批环节")]),t._v(" "),4==t.status?e("el-select",{staticClass:"option_1 option_margin",attrs:{placeholder:"请选择",size:"small"},on:{change:t.batchNodeChange},model:{value:t.batchSearchP.nodeId,callback:function(e){t.$set(t.batchSearchP,"nodeId",e)},expression:"batchSearchP.nodeId"}},t._l(t.batchNodes,(function(t){return e("el-option",{key:t.id,attrs:{label:t.node_name,value:t.id}})})),1):t._e(),t._v(" "),2==t.status?e("el-select",{staticClass:"option_1 option_margin",attrs:{placeholder:"请选择",size:"small"},on:{change:t.thirdNodeChange},model:{value:t.thirdSearchP.nodeId,callback:function(e){t.$set(t.thirdSearchP,"nodeId",e)},expression:"thirdSearchP.nodeId"}},t._l(t.thirdNodes,(function(t,s){return e("el-option",{key:s,attrs:{label:t.name,value:t.id}})})),1):t._e(),t._v(" "),e("span",{staticClass:"option_title"},[t._v("发起者部门")]),t._v(" "),4==t.status?e("departSearch",{staticClass:"option_margin",attrs:{id:t.batchSearchP.departId,valueType:"id"},on:{"update:id":function(e){return t.$set(t.batchSearchP,"departId",e)}}}):t._e(),t._v(" "),2==t.status?e("departSearch",{staticClass:"option_margin",attrs:{id:t.thirdSearchP.departId,valueType:"id"},on:{"update:id":function(e){return t.$set(t.thirdSearchP,"departId",e)}}}):t._e(),t._v(" "),t.mixTodoSearch.includes("className")?e("div",[e("span",{staticClass:"option_title"},[t._v("发起人班级")]),t._v(" "),e("el-select",{staticClass:"option_1 option_margin",attrs:{size:"small",placeholder:"请选择发起人班级",filterable:"",clearable:""},model:{value:t.batchSearchP.class_name,callback:function(e){t.$set(t.batchSearchP,"class_name",e)},expression:"batchSearchP.class_name"}},t._l(t.classNameList,(function(t,s){return e("el-option",{key:s,attrs:{label:t,value:t}})})),1)],1):t._e()],1)]),t._v(" "),e("div",[e("zlButton",{attrs:{widthType:"fixed",type:"reset"},on:{click:function(e){return t.batchReset(t.status)}}},[t._v("重置")]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:function(e){return t.batchSearch(t.status)}}},[t._v("查询")])],1)]),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content_w matter_list todo_list"},[e("todoList",{ref:"todoList",attrs:{status:t.status,list:t.todoList,total:t.total,is_advanced_component:t.is_advanced_component,advanced_component:t.advanced_component,thirdSearchP:t.thirdSearchP,OperationList:t.OperationList,batchSearchP:t.batchSearchP,batchAuth:t.batchAuth},on:{updateList:t.getBatch}}),t._v(" "),t.total>=1?e("div",{staticClass:"matter_list_page"},[e("el-pagination",{staticClass:"common_pagination",attrs:{"current-page":t.p,"page-sizes":[10,20,30,40,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e(),t._v(" "),0==t.total?e("div",{staticClass:"matter_list_noData"},[e("img",{attrs:{src:t.$appConfig.staticUrl+"img/no_data_5.png",alt:""}}),t._v(" "),e("p",[t._v("暂无"+t._s(t.statusText)+t._s(t.$t("system.matterTodoReminder"))+"任务")])]):t._e()],1)]),t._v(" "),e("batchRecordCom",{attrs:{status:t.showBatchRecordCom},on:{"update:status":function(e){t.showBatchRecordCom=e}}})],1)},i=[],n=s("9192"),o=function(){var t=this,e=t._self._c;return e("section",[4==t.status&&t.list.length||2==t.status&&t.list.length?e("div",{staticClass:"todo_list_btn"},[e("div",{staticClass:"todo_list_btn_l"},[4==t.status?e("el-checkbox",{attrs:{disabled:t.uploadUserPop.uploadUserFile},on:{change:function(e){return t.checkAllChange()}},model:{value:t.isCheckAll,callback:function(e){t.isCheckAll=e},expression:"isCheckAll"}}):t._e(),t._v(" "),2==t.status?e("el-checkbox",{attrs:{disabled:t.uploadUserPop.uploadUserFile},on:{change:function(e){return t.checkAllChangeThird()}},model:{value:t.thirdCheckAll,callback:function(e){t.thirdCheckAll=e},expression:"thirdCheckAll"}}):t._e(),t._v(" "),4==t.status?e("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.mutilType,callback:function(e){t.mutilType=e},expression:"mutilType"}},[e("el-option",{attrs:{label:"当页全选",value:"page"}}),t._v(" "),e("el-option",{attrs:{label:"全部全选",value:"all"}})],1):t._e(),t._v(" "),t.selectTaskList.length&&4==t.status||t.uploadUserPop.uploadUserFile&&4==t.status?[t.batchAuth.deal.includes(-5)?e("zlButton",{attrs:{widthType:"fixed",type:"reset"},on:{click:function(e){return t.$refs.userSearchCom.show()}}},[t._v("代处理")]):t._e(),t._v(" "),t._l(t.batchAuth.newCustom,(function(s,a){return e("zlButton",{key:a,attrs:{type:"reset"},on:{click:function(e){return t.showBatchPop(s.value)}}},[t._v(t._s(s.show_name||s.name))])}))]:t._e(),t._v(" "),t.OperationList.length&&2==t.status?t._l(t.OperationList,(function(s,a){return e("zlButton",{key:a,staticStyle:{"margin-left":"44px","margin-right":"0"},attrs:{type:"reset"},on:{click:function(e){return t.showthirdPop(s.key,s)}}},[t._v(t._s(s.value))])})):t._e(),t._v(" "),4==t.status&&t.mixGetConfig("mixShowUploadBtn",t.list[0].app_id)?e("zlButton",{staticClass:"uploadUser",attrs:{type:"reset"},on:{click:function(e){t.uploadUserPop.isShow=!0}}},[t._v("\n          "+t._s(t.$t("system.matterTodoUploadName"))+"\n          "),t.uploadUserPop.uploadUserFile?e("div",{staticClass:"icon"},[e("i",{staticClass:"el-icon-check"})]):t._e()]):t._e()],2),t._v(" "),e("p",[t._v("\n        共\n        "),e("i",[t._v(t._s(t.total))]),t._v(" 条信息\n      ")])]):t._e(),t._v(" "),2==t.status?e("el-checkbox-group",{attrs:{disabled:t.uploadUserPop.uploadUserFile},on:{change:t.checkChangeThird},model:{value:t.thirdSelectTaskList,callback:function(e){t.thirdSelectTaskList=e},expression:"thirdSelectTaskList"}},[e("ul",{class:t.classHead+"matter_list_data"},[t._l(t.list,(function(s,a){return[2==s.type?e("li",{key:a},[2==t.status?e("div",{staticClass:"matter_list_data_checked"},[e("el-checkbox",{key:s.task_id,attrs:{disabled:t.uploadUserPop.uploadUserFile,label:s.task_id},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(""))])],1):t._e(),t._v(" "),e("a",{staticClass:"list_data_a",attrs:{href:s.thirdparty_form_url_view,target:t.mixMatterTodoOpenBlank?"_blank":"_self"}},[e("div",{staticClass:"matter_list_data_content",staticStyle:{"margin-left":"30px"}},[e("div",{staticClass:"content_img"},[s.thirdparty_logo?e("img",{attrs:{src:s.thirdparty_logo,alt:""}}):e("mixthirdMatterLogoCom",{attrs:{data:s,type:"todo"}}),t._v(" "),e("p",{staticClass:"data_content_percent"},[t._v("\n                    "+t._s(s.thirdparty_percent)+"%\n                  ")])],1),t._v(" "),e("div",{staticClass:"content_title"},[e("div",{staticClass:"content_title_top"},[t._v("\n                    "+t._s(s.thirdparty_name)+"\n                  ")]),t._v(" "),e("el-tooltip",{attrs:{effect:"light",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("span",[t._v("\n                        发起人：\n                        "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_creator_name))])]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),0==s.task_status||1==s.task_status?e("span",[t._v("\n                        / 当前环节："+t._s(s.node_name)+"\n                      ")]):[e("span",[t._v("\n                          / 处理环节："+t._s(s.task_node_name)+"\n                        ")]),t._v(" "),e("span",[t._v("\n                          / 办理进度："+t._s(0==s.inst_status?"进行中":"已结束")+"\n                        ")])]],2),t._v(" "),e("div",{staticClass:"content_title_bottom"},[e("span",[t._v("\n                        发起人：\n                        "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_creator_name))])]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),0==s.task_status||1==s.task_status?e("span",[t._v("\n                        / 当前环节：\n                        "),e("i",{staticClass:"label_1"},[t._v(t._s(s.node_name))])]):[e("span",[t._v("\n                          / 处理环节：\n                          "),e("i",{staticClass:"label_1"},[t._v(t._s(s.task_node_name))])]),t._v(" "),e("span",[t._v("\n                          / 办理进度：\n                          "),0==s.inst_status?e("i",{staticClass:"label_1"},[t._v("进行中")]):e("i",{staticClass:"label_1"},[t._v("已结束")])])]],2)])],1)]),t._v(" "),e("div",{staticClass:"matter_list_data_btn"},[e("div",[s.thirdparty_config_arr&&1==s.thirdparty_config_arr.log?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.mixShowProcessLogPop(s,1)}}},[e("i",{staticClass:"iconfont icon-form"}),t._v("\n                    处理记录\n                  ")]):t._e()]),t._v(" "),e("div",[e("mixTodoThirdToCom",{attrs:{data:s}}),t._v(" "),s.thirdparty_config_arr&&1==s.thirdparty_config_arr.process_pic?[e("span",{staticClass:"line"}),t._v(" "),e("a",{attrs:{href:s.process_pic_url?s.process_pic_url:"javascript:;",target:"_blank"}},[e("i",{staticClass:"iconfont iconliucheng2"}),t._v("\n                      "+t._s(t.$t("system.processTracking"))+"\n                    ")])]:t._e()],2)])])]):e("li",{key:a,on:{click:function(e){return t.$emit("toExamine")}}},[4==t.status?e("div",{staticClass:"matter_list_data_checked"},[e("el-checkbox",{key:s.task_id,attrs:{disabled:t.uploadUserPop.uploadUserFile,label:s.task_id},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(""))])],1):t._e(),t._v(" "),e("section",[e("a",{staticClass:"list_data_a",attrs:{target:t.mixMatterTodoOpenBlank?"_blank":"_self",href:t.toExamineParam(s)}},[e("div",{staticClass:"matter_list_data_content",class:{active:4==t.status},attrs:{href:"javascript:;"}},[e("div",{staticClass:"content_img"},[e("mixMatterLogoCom",{attrs:{data:s,type:"todo"}}),t._v(" "),"yes"==t.siteConfig.system_setting.percent_show?e("p",{staticClass:"data_content_percent"},[t._v("\n                      "+t._s(s.percent)+"%\n                    ")]):t._e()],1),t._v(" "),e("div",{staticClass:"content_title"},[e("div",{staticClass:"content_title_top"},[1==t.$appCommonH.getSignValue(s)?e("span",{staticClass:"label_8"},[t._v("["+t._s(s.add_sign_name)+t._s(t.mixGetConfig("mixCountersigntext",s.app_id).tagText)+"]")]):t._e(),t._v(" "),2==t.$appCommonH.getSignValue(s)?e("span",{staticClass:"label_8"},[t._v("["+t._s(t.mixGetConfig("mixCountersigntext",s.app_id).receiptText)+"]")]):t._e(),t._v(" "),s.flags.includes(2)?e("span",{staticClass:"label_7"},[t._v("[代办来自"+t._s(s.delegate_name)+"]")]):t._e(),t._v(" "),s.flags.includes(3)?e("span",{staticClass:"label_5"},[t._v("紧急")]):t._e(),t._v(" "),s.flags.includes(8)?e("span",{staticClass:"label_5"},[t._v("挂起")]):t._e(),t._v(" "),s.flags.includes(1)?e("span",{staticClass:"label_6"},[t._v("催办")]):t._e(),t._v(" "),s.flags.includes(5)?e("span",{staticClass:"label_2"},[t._v("驳回")]):t._e(),t._v(" "),t.mixshowTitleText&&s.task_node_name?e("span",[t._v(t._s(s.task_node_name)+"-")]):t._e(),t._v(t._s(t._f("matterName")(s))+"\n                      "),e("p",{staticClass:"top_subtitle"},[s.tag_name?e("span",{staticClass:"top_subtitle_tag"},[t._v(t._s(s.tag_name))]):t._e(),t._v(" "),s.tag_name&&s.task_name?e("span",[t._v("/")]):t._e(),t._v(" "),s.task_name?e("span",[e("font",[t._v("[")]),t._v(t._s(s.app_name)),e("font",[t._v("]")])],1):t._e()]),t._v(" "),t._t("pkuLabel",null,{data:s})],2),t._v(" "),e("el-tooltip",{attrs:{effect:"light",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("span",[t._v("\n                          发起人："+t._s(s.inst_creator_name)+"\n                        ")]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),t.$appCommonH.getTodoStatus(s)?e("span",[t._v("\n                          / 当前环节："+t._s(s.node_name)+"\n                        ")]):[e("span",[t._v("\n                            / 处理环节："+t._s(s.task_node_name)+"\n                          ")]),t._v(" "),e("span",[t._v("\n                           / 办理进度："+t._s(s.inst_status_name)+"\n                          ")])]],2),t._v(" "),e("div",{staticClass:"content_title_bottom"},[e("span",[t._v("\n                          发起人：\n                          "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_creator_name))])]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),t.$appCommonH.getTodoStatus(s)?e("span",[t._v("\n                          / 当前环节:\n                          "),t._v(" "),e("i",{staticClass:"label_1"},[t._v(t._s(s.task_node_name))])]):[e("span",[t._v("\n                            / 处理环节：\n                            "),e("i",{staticClass:"label_1"},[t._v(t._s(s.task_node_name))])]),t._v(" "),e("span",[t._v("\n                            / 办理进度：\n                            "),t._v(" "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_status_name))])])]],2)])],1)]),t._v(" "),e("div",{staticClass:"matter_list_data_btn"},[e("div",[s.flags.includes(5)&&0==s.task_status?e("el-popover",{attrs:{placement:"left",width:"200",trigger:"hover",content:"请立刻修改，重新提交","popper-class":"matter_list_reject_pop"}},[e("i",{staticClass:"el-icon-warning",attrs:{slot:"reference"},slot:"reference"})]):t._e(),t._v(" "),s.revokable&&9!==t.status?[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.revoke(s)}}},[e("i",{staticClass:"iconfont icon-form"}),t._v("\n                        收回\n                      ")])]:t._e()],2),t._v(" "),e("div",[e("a",{attrs:{target:t.mixMatterTodoOpenBlank?"_blank":"_self",href:t.toExamineParam(s)},on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"iconfont iconchakan"}),t._v("\n                      "+t._s(t.$appCommonH.getTodoStatus(s)?"处理事项":"查看表单")+"\n                    ")]),t._v(" "),t.mixGetConfig("mixShowMatterLog",s.app_id)?e("span",{staticClass:"line"}):t._e(),t._v(" "),t.mixGetConfig("mixShowMatterLog",s.app_id)?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.mixShowProcessLogPop(s)}}},[e("i",{staticClass:"iconfont icon-form"}),t._v("\n                      处理记录\n                    ")]):t._e(),t._v(" "),t.mixShowFlowchartBtn(s.node_config)?[e("span",{staticClass:"line"}),t._v(" "),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.mixShowProcessSvgPop({inst_id:s.inst_id,task_id:s.task_id})}}},[e("i",{staticClass:"iconfont iconliucheng2"}),t._v("\n                        "+t._s(t.$t("system.processTracking"))+"\n                      ")])]:t._e()],2)])])])])]}))],2)]):e("el-checkbox-group",{attrs:{disabled:t.uploadUserPop.uploadUserFile},on:{change:t.checkChange},model:{value:t.selectTaskList,callback:function(e){t.selectTaskList=e},expression:"selectTaskList"}},[e("ul",{class:t.classHead+"matter_list_data"},[t._l(t.list,(function(s,a){return[2==s.type?e("li",{key:a},[2==t.status?e("div",{staticClass:"matter_list_data_checked"},[e("el-checkbox",{key:s.task_id,attrs:{disabled:t.uploadUserPop.uploadUserFile,label:s.task_id},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(""))])],1):t._e(),t._v(" "),e("a",{staticClass:"list_data_a",attrs:{href:s.thirdparty_form_url_view,target:t.mixMatterTodoOpenBlank?"_blank":"_self"}},[e("div",{staticClass:"matter_list_data_content"},[e("div",{staticClass:"content_img"},[s.thirdparty_logo?e("img",{attrs:{src:s.thirdparty_logo,alt:""}}):e("mixthirdMatterLogoCom",{attrs:{data:s,type:"todo"}}),t._v(" "),e("p",{staticClass:"data_content_percent"},[t._v("\n                    "+t._s(s.thirdparty_percent)+"%\n                  ")])],1),t._v(" "),e("div",{staticClass:"content_title"},[e("div",{staticClass:"content_title_top"},[t._v("\n                    "+t._s(s.thirdparty_name)+"\n                  ")]),t._v(" "),e("el-tooltip",{attrs:{effect:"light",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("span",[t._v("\n                        发起人：\n                        "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_creator_name))])]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),0==s.task_status||1==s.task_status?e("span",[t._v("\n                        / 当前环节："+t._s(s.node_name)+"\n                      ")]):[e("span",[t._v("\n                          / 处理环节："+t._s(s.task_node_name)+"\n                        ")]),t._v(" "),e("span",[t._v("\n                          / 办理进度："+t._s(0==s.inst_status?"进行中":"已结束")+"\n                        ")])]],2),t._v(" "),e("div",{staticClass:"content_title_bottom"},[e("span",[t._v("\n                        发起人：\n                        "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_creator_name))])]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),0==s.task_status||1==s.task_status?e("span",[t._v("\n                        / 当前环节：\n                        "),e("i",{staticClass:"label_1"},[t._v(t._s(s.node_name))])]):[e("span",[t._v("\n                          / 处理环节：\n                          "),e("i",{staticClass:"label_1"},[t._v(t._s(s.task_node_name))])]),t._v(" "),e("span",[t._v("\n                          / 办理进度：\n                          "),0==s.inst_status?e("i",{staticClass:"label_1"},[t._v("进行中")]):e("i",{staticClass:"label_1"},[t._v("已结束")])])]],2)])],1)]),t._v(" "),e("div",{staticClass:"matter_list_data_btn"},[e("div",[s.thirdparty_config_arr&&1==s.thirdparty_config_arr.log?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.mixShowProcessLogPop(s,1)}}},[e("i",{staticClass:"iconfont icon-form"}),t._v("\n                    处理记录\n                  ")]):t._e()]),t._v(" "),e("div",[e("mixTodoThirdToCom",{attrs:{data:s}}),t._v(" "),s.thirdparty_config_arr&&1==s.thirdparty_config_arr.process_pic?[e("span",{staticClass:"line"}),t._v(" "),e("a",{attrs:{href:s.process_pic_url?s.process_pic_url:"javascript:;",target:"_blank"}},[e("i",{staticClass:"iconfont iconliucheng2"}),t._v("\n                      "+t._s(t.$t("system.processTracking"))+"\n                    ")])]:t._e()],2)])])]):e("li",{key:a,on:{click:function(e){return t.$emit("toExamine")}}},[4==t.status?e("div",{staticClass:"matter_list_data_checked"},[e("el-checkbox",{key:s.task_id,attrs:{disabled:t.uploadUserPop.uploadUserFile,label:s.task_id},on:{click:function(t){t.stopPropagation()}}},[t._v(t._s(""))])],1):t._e(),t._v(" "),e("section",[e("a",{staticClass:"list_data_a",attrs:{href:t.toExamineParam(s)},on:{click:function(e){return t.toExaminePath(e,s)}}},[e("div",{staticClass:"matter_list_data_content",class:{active:4==t.status},attrs:{href:"javascript:;"}},[e("div",{staticClass:"content_img"},[e("mixMatterLogoCom",{attrs:{data:s,type:"todo"}}),t._v(" "),"yes"==t.siteConfig.system_setting.percent_show?e("p",{staticClass:"data_content_percent"},[t._v("\n                      "+t._s(s.percent)+"%\n                    ")]):t._e()],1),t._v(" "),e("div",{staticClass:"content_title"},[e("div",{staticClass:"content_title_top"},[1==t.$appCommonH.getSignValue(s)?e("span",{staticClass:"label_8"},[t._v("["+t._s(s.add_sign_name)+t._s(t.mixGetConfig("mixCountersigntext",s.app_id).tagText)+"]")]):t._e(),t._v(" "),2==t.$appCommonH.getSignValue(s)?e("span",{staticClass:"label_8"},[t._v("["+t._s(t.mixGetConfig("mixCountersigntext",s.app_id).receiptText)+"]")]):t._e(),t._v(" "),s.flags.includes(2)?e("span",{staticClass:"label_7"},[t._v("[代办来自"+t._s(s.delegate_name)+"]")]):t._e(),t._v(" "),s.flags.includes(3)?e("span",{staticClass:"label_5"},[t._v("紧急")]):t._e(),t._v(" "),s.flags.includes(8)?e("span",{staticClass:"label_5"},[t._v("挂起")]):t._e(),t._v(" "),s.flags.includes(1)?e("span",{staticClass:"label_6"},[t._v("催办")]):t._e(),t._v(" "),s.flags.includes(5)?e("span",{staticClass:"label_2"},[t._v("驳回")]):t._e(),t._v(" "),t.mixshowTitleText&&s.task_node_name?e("span",[t._v(t._s(s.task_node_name)+"-")]):t._e(),t._v(t._s(t._f("matterName")(s))+"\n                      "),e("p",{staticClass:"top_subtitle"},[s.tag_name?e("span",{staticClass:"top_subtitle_tag"},[t._v(t._s(s.tag_name))]):t._e(),t._v(" "),s.tag_name&&s.task_name?e("span",[t._v("/")]):t._e(),t._v(" "),s.task_name?e("span",[e("font",[t._v("[")]),t._v(t._s(s.app_name)),e("font",[t._v("]")])],1):t._e()]),t._v(" "),t._t("pkuLabel",null,{data:s})],2),t._v(" "),e("el-tooltip",{attrs:{effect:"light",placement:"bottom"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("span",[t._v("\n                          发起人："+t._s(s.inst_creator_name)+"\n                        ")]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),t.$appCommonH.getTodoStatus(s)?e("span",[t._v("\n                          / 当前环节："+t._s(s.node_name)+"\n                        ")]):[e("span",[t._v("\n                            / 处理环节："+t._s(s.task_node_name)+"\n                          ")]),t._v(" "),e("span",[t._v("\n                           / 办理进度："+t._s(s.inst_status_name)+"\n                          ")])]],2),t._v(" "),e("div",{staticClass:"content_title_bottom"},[e("span",[t._v("\n                          发起人：\n                          "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_creator_name))])]),t._v(" "),e("span",[t._v("/ "+t._s(s.inst_creator_department))]),t._v(" "),e("span",[t._v("/ "+t._s(t.showTypeTime(s)))]),t._v(" "),e("span",[t._v("/ 总耗时："+t._s(t.timeConsuming(s)))]),t._v(" "),t.$appCommonH.getTodoStatus(s)?e("span",[t._v("\n                          / 当前环节:\n                          "),t._v(" "),e("i",{staticClass:"label_1"},[t._v(t._s(s.task_node_name))])]):[e("span",[t._v("\n                            / 处理环节：\n                            "),e("i",{staticClass:"label_1"},[t._v(t._s(s.task_node_name))])]),t._v(" "),e("span",[t._v("\n                            / 办理进度：\n                            "),t._v(" "),e("i",{staticClass:"label_1"},[t._v(t._s(s.inst_status_name))])])]],2)])],1)]),t._v(" "),e("div",{staticClass:"matter_list_data_btn"},[e("div",[s.flags.includes(5)&&0==s.task_status?e("el-popover",{attrs:{placement:"left",width:"200",trigger:"hover",content:"请立刻修改，重新提交","popper-class":"matter_list_reject_pop"}},[e("i",{staticClass:"el-icon-warning",attrs:{slot:"reference"},slot:"reference"})]):t._e(),t._v(" "),s.revokable&&9!==t.status?[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.revoke(s)}}},[e("i",{staticClass:"iconfont icon-form"}),t._v("\n                        收回\n                      ")])]:t._e()],2),t._v(" "),e("div",[e("a",{attrs:{target:t.mixMatterTodoOpenBlank?"_blank":"_self",href:t.toExamineParam(s)},on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"iconfont iconchakan"}),t._v("\n                      "+t._s(t.$appCommonH.getTodoStatus(s)?"处理事项":"查看表单")+"\n                    ")]),t._v(" "),t.mixGetConfig("mixShowMatterLog",s.app_id)?e("span",{staticClass:"line"}):t._e(),t._v(" "),t.mixGetConfig("mixShowMatterLog",s.app_id)?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.mixShowProcessLogPop(s)}}},[e("i",{staticClass:"iconfont icon-form"}),t._v("\n                      处理记录\n                    ")]):t._e(),t._v(" "),t.mixShowFlowchartBtn(s.node_config)?[e("span",{staticClass:"line"}),t._v(" "),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.stopPropagation(),t.mixShowProcessSvgPop({inst_id:s.inst_id,task_id:s.task_id})}}},[e("i",{staticClass:"iconfont iconliucheng2"}),t._v("\n                        "+t._s(t.$t("system.processTracking"))+"\n                      ")])]:t._e()],2)])])])])]}))],2)]),t._v(" "),2==t.status?e("el-dialog",{attrs:{visible:t.batchPop,width:"360px","show-close":!1,"lock-scroll":!1,"custom-class":"todo_batch_pop",center:""},on:{"update:visible":function(e){t.batchPop=e}}},[e("div",{staticClass:"todo_batch_pop_main"},[e("p",{staticClass:"title"},[t._v("\n          确定执行\n          "),e("i",[t._v("“"+t._s(t.examineTypes[t.nowType])+"”")]),t._v(" 操作\n        ")]),t._v(" "),t.thirdSelectTaskList.length?e("p",{staticClass:"total"},[t._v("\n          - 总共\n          "),e("i",[t._v(t._s(t.thirdSelectTaskList.length))]),t._v(" 条记录 -\n        ")]):t._e(),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.batchCommentThird,expression:"batchCommentThird",modifiers:{trim:!0}}],attrs:{placeholder:"请输入处理意见"},domProps:{value:t.batchCommentThird},on:{input:function(e){e.target.composing||(t.batchCommentThird=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zlButton",{attrs:{widthType:"fixed",type:"line"},on:{click:function(e){t.batchPop=!1,t.batchComment=""}}},[t._v("取消")]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:function(e){return t.examine(t.status)}}},[t._v("确定")])],1)]):t._e(),t._v(" "),e("el-dialog",{attrs:{title:"信息完善",visible:t.checkShow,width:"360px",center:"","show-close":!1,"lock-scroll":!1},on:{"update:visible":function(e){t.checkShow=e}}},[e("span",[t._v("您还未上传个人签名，请上传后申请批")]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zlButton",{attrs:{widthType:"fixed",type:"line"},on:{click:function(e){t.checkShow=!1}}},[t._v("取 消")]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:t.uploadClick}},[t._v("上 传")])],1)]),t._v(" "),4==t.status?e("el-dialog",{attrs:{visible:t.batchPop,width:"360px","show-close":!1,"lock-scroll":!1,"custom-class":"todo_batch_pop",center:""},on:{"update:visible":function(e){t.batchPop=e}}},[e("div",{staticClass:"todo_batch_pop_main"},[e("p",{staticClass:"title"},[t._v("\n          确定执行\n          "),e("i",[t._v("“"+t._s(t.examineTypes[t.nowType])+"”")]),t._v(" 操作\n        ")]),t._v(" "),t.uploadUserPop.uploadUserFile?t._e():e("p",{staticClass:"total"},[t._v("\n          - 总共\n          "),e("i",[t._v(t._s(t.selectTaskList.length))]),t._v(" 条记录 -\n        ")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.batchComment,expression:"batchComment",modifiers:{trim:!0}}],attrs:{placeholder:"请输入处理意见"},domProps:{value:t.batchComment},on:{input:function(e){e.target.composing||(t.batchComment=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zlButton",{attrs:{widthType:"fixed",type:"line"},on:{click:function(e){t.batchPop=!1}}},[t._v("取消")]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:function(e){return t.examine(t.status)}}},[t._v("确定")])],1)]):t._e(),t._v(" "),e("el-dialog",{attrs:{title:"批量处理结果",visible:t.uploadUserResultPop.isShow,width:"360px","custom-class":"dialogPop uploadUserPop"},on:{"update:visible":function(e){return t.$set(t.uploadUserResultPop,"isShow",e)}}},[e("div",{staticClass:"cont"},[e("div",[t._v(t._s(t.uploadUserResultPop.resMessage))]),t._v(" "),t.uploadUserResultPop.errorFile?e("el-link",{attrs:{type:"primary",href:t.uploadUserResultPop.errorFile,target:"_blank"}},[t._v("下载失败结果")]):t._e()],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zlButton",{attrs:{widthType:"fixed"},on:{click:function(e){t.uploadUserResultPop.isShow=!1}}},[t._v("关闭页面")])],1)]),t._v(" "),e("el-dialog",{attrs:{title:t.$t("system.matterTodoUploadName"),visible:t.uploadUserPop.isShow,width:"360px","custom-class":"dialogPop uploadUserPop"},on:{"update:visible":function(e){return t.$set(t.uploadUserPop,"isShow",e)}}},[e("div",{staticClass:"cont"},["success"==t.uploadUserPop.status||"error"==t.uploadUserPop.status?e("div",[t._v("上传成功")]):e("el-link",{attrs:{type:"primary",href:"".concat(t.$appConfig.apiBaseUrl,"/site/batch/down-template"),target:"_blank"}},[t._v("下载导入模板")]),t._v(" "),e("input",{ref:"uploadUserFile",staticStyle:{display:"none"},attrs:{type:"file",name:"upfile"},on:{change:function(e){return t.upload(e)}}})],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["success"==t.uploadUserPop.status?e("zlButton",{attrs:{widthType:"fixed"},on:{click:function(e){t.uploadUserPop.isShow=!1}}},[t._v("关闭页面")]):"error"==t.uploadUserPop.status?e("zlButton",{attrs:{widthType:"fixed"},on:{click:function(e){t.uploadUserPop.isShow=!1}}},[t._v("重新上传")]):[e("zlButton",{attrs:{widthType:"fixed",type:"line"},on:{click:function(e){t.uploadUserPop.isShow=!1}}},[t._v("取消")]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:function(e){return t.$refs.uploadUserFile.click()}}},[t._v("上传")])]],2)]),t._v(" "),e("userSearchCom",{ref:"userSearchCom",attrs:{title:"代处理",api:"getUserbefore",data:{type:"name"}},on:{selectUser:t.selectUser}}),t._v(" "),e("el-dialog",{attrs:{visible:t.batchSuccessPop,width:"380px","show-close":!1,"custom-class":"todo_batch_success_pop",center:""},on:{"update:visible":function(e){t.batchSuccessPop=e}}},[e("div",{staticClass:"todo_batch_success_pop_main"},[e("i",{staticClass:"el-icon-success"}),t._v(" "),e("p",[t._v("批处理任务提交成功")]),t._v(" "),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.showBatchRecordCom=!0}}},[t._v("查看进度＞")])]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zlButton",{attrs:{widthType:"fixed"}},[t._v("关闭")])],1)]),t._v(" "),t.showSelectEx?e("nextNode",{on:{setinfo:t.submitExUser}}):t._e(),t._v(" "),e("mixProcessLogPopCom",{ref:"mixProcessLogPopCom"}),t._v(" "),e("mixProcessSvgPopCom",{ref:"mixProcessSvgPopCom"}),t._v(" "),e("batchRecordCom",{attrs:{status:t.showBatchRecordCom},on:{"update:status":function(e){t.showBatchRecordCom=e}}})],1)},r=[],c=s("6abf"),l=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"360px","lock-scroll":!1,"custom-class":"dialog_common_style user_search_com"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"user_search_com_main"},[e("el-autocomplete",{attrs:{placeholder:"请输入内容",size:"small","fetch-suggestions":t.querySearchUser},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(s){var a=s.item;return[e("div",{staticClass:"user_search_com_main_user ellipsis",attrs:{title:"".concat(a.name,"-").concat(a.number,"-").concat(a.college)}},[e("span",[t._v(t._s(a.name))]),t._v(" "),e("span",{staticClass:"main_user_i"},[t._v(t._s(a.number))]),t._v(" "),e("span",{staticClass:"main_user_i"},[t._v(t._s(a.college))])])]}}]),model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("zlButton",{attrs:{widthType:"fixed",type:"line"},on:{click:t.close}},[t._v("取消")]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:t.confirm}},[t._v("确定")])],1)])},d=[],h=(s("d3b7"),s("159b"),{data:function(){return{dialogVisible:!1,restaurants:[],state:"",selectUser:null}},props:{title:{default:"提示",type:String},api:{default:"getUserbefore"},data:{default:{}}},methods:{querySearchUser:function(t,e){this.selectUser=null,t?this.$appFetch({url:this.api,method:"get",data:Object(n["a"])({keyword:t},this.data)},(function(t){0==t.e?(t.d.data.forEach((function(t){t.value=t.name})),e(t.d.data)):e([])}),(function(t){e([])})):e([])},handleSelect:function(t){this.selectUser=t},show:function(){this.state="",this.selectUser=null,this.dialogVisible=!0},close:function(){this.dialogVisible=!1},confirm:function(){this.selectUser?(this.dialogVisible=!1,this.$emit("selectUser",this.selectUser)):this.$message({type:"warning",message:"请选择人员"})}}}),p=(s("679b"),Object(n["a"])({},h)),_=p,u=s("0b56"),m=Object(u["a"])(_,l,d,!1,null,null,null),v=m.exports,f=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"batchRecord",attrs:{title:"批处理记录",visible:t.cancel,width:"862px","lock-scroll":!1,center:""},on:{"update:visible":function(e){t.cancel=e}}},[t.shouSearch?[e("div",{staticClass:"batchRecord_search"},[e("span",{staticClass:"search_box"},[t._v("\n            事项名称\n            "),e("el-select",{attrs:{size:"mini",placeholder:"选择事项"},on:{change:t.batchAppChange},model:{value:t.selectAppId,callback:function(e){t.selectAppId=e},expression:"selectAppId"}},t._l(t.batchApps,(function(t){return e("el-option",{key:t.app_id,attrs:{label:t.app_name,value:t.app_id}})})),1)],1),t._v(" "),e("span",{staticClass:"search_box"},[t._v("\n            审批环节\n            "),e("el-select",{attrs:{size:"mini",placeholder:"选择节点"},on:{change:t.batchNodeChange},model:{value:t.selectNodeId,callback:function(e){t.selectNodeId=e},expression:"selectNodeId"}},t._l(t.batchNodes,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),e("span",{staticClass:"search_btn"},[e("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.searchs}},[t._v("查询")])],1)]),t._v(" "),e("div",{staticClass:"batchRecord_cont"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.batchRecordData,align:"center","header-align":"center",size:"mini",border:""}},[e("el-table-column",{attrs:{align:"center","headeifr-align":"center",prop:"app_name",width:"220",label:"任务信息"}}),t._v(" "),e("el-table-column",{attrs:{align:"center","header-align":"center",prop:"node_name",label:"审批环节",width:"100"}}),t._v(" "),e("el-table-column",{attrs:{align:"center","header-align":"center",prop:"address",width:"120",label:"已完成/失败/总数"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[e("span",{staticClass:"success"},[t._v(t._s(s.row.success_num))]),t._v("/"),e("span",{staticClass:"error"},[t._v(t._s(s.row.error_num))]),t._v("/"),e("span",[t._v(t._s(s.row.total_num))])])]}}],null,!1,2061079670)}),t._v(" "),e("el-table-column",{attrs:{align:"center","header-align":"center",prop:"created",width:"170",label:"任务时间"}}),t._v(" "),e("el-table-column",{attrs:{align:"center","header-align":"center",prop:"address",width:"90",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(s){return[0==s.row.status?e("span",[t._v("等待处理")]):1==s.row.status?e("span",{staticClass:"success"},[t._v("处理完成")]):2==s.row.status?e("span",{staticClass:"error"},[t._v("异常")]):3==s.row.status?e("span",{staticClass:"blue"},[t._v("处理中")]):t._e()]}}],null,!1,2864044005)}),t._v(" "),e("el-table-column",{attrs:{align:"center","header-align":"center",prop:"address",width:"110",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==s.row.type&&2==s.row.status?e("span",{staticClass:"refresh",on:{click:function(e){return t.refresh(s.row.id)}}},[e("span",{staticClass:"el-icon-refresh-right"}),t._v(" 重试\n                ")]):t._e(),t._v(" "),0==s.row.status?e("span",{staticClass:"refresh",on:{click:function(e){return t.delBatch(s.row.id)}}},[e("span",{staticClass:"el-icon-delete"}),t._v(" 删除\n                ")]):t._e(),t._v(" "),2==s.row.status&&1==s.row.type?e("span",{staticClass:"refresh",on:{click:function(e){return t.detal(s.row)}}},[e("span",{staticClass:"el-icon-s-unfold"}),t._v(" 查看\n                ")]):t._e()]}}],null,!1,3125370086)})],1),t._v(" "),t.total>20?e("el-pagination",{attrs:{"current-page":t.p,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.p=e},"update:current-page":function(e){t.p=e}}}):t._e()],1)]:[e("div",{staticClass:"batchRecord_search"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.shouSearch=!0}}},[t._v("返回")]),t._v(" "),e("span",{staticClass:"search_box",staticStyle:{"margin-left":"8rem"}},[t._v("\n            任务信息："+t._s(t.nowErrorData.app_name)+"\n          ")]),t._v(" "),e("span",{staticClass:"search_box"},[t._v("\n            审批环节："+t._s(t.nowErrorData.node_name)+"\n          ")]),t._v(" "),e("span",{staticClass:"search_box"},[t._v("\n            失败："+t._s(t.nowErrorData.error_num)+"\n          ")])],1),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.result,align:"center","header-align":"center",size:"mini",border:""}},[e("el-table-column",{attrs:{align:"center","headeifr-align":"center",prop:"id",width:"220",label:"实例id"}}),t._v(" "),e("el-table-column",{attrs:{align:"center","header-align":"center",prop:"data",label:"报错信息"}})],1)]],2)},g=[],b=(s("9a2b"),{data:function(){return{cancel:!1,selectAppId:0,selectNodeId:0,batchNodes:[{id:0,name:"全部"}],batchApps:[],shouSearch:!0,batchRecordData:[],total:0,p:1,nowErrorData:{},result:[]}},created:function(){this.getList(),this.search()},props:{status:{type:Boolean,required:!0}},watch:{cancel:function(t){t?this.reset():this.$emit("update:status",t)},status:function(t){t&&(this.cancel=t)}},mounted:function(){},methods:{batchAppChange:function(t){var e=this;this.selectNodeId=0,this.batchApps.forEach((function(s){s.app_id==t&&(e.batchNodes=s.nodes)}))},batchNodeChange:function(){},handleCurrentChange:function(t){this.p=t,this.search()},getList:function(){var t=this;this.$appFetch({url:"getBatchNodesNew",method:"get"},(function(e){0==e.e?(t.batchApps=e.d,t.batchApps.unshift({app_id:0,thirdparty_id:0,nodes:[],app_name:"全部"}),t.batchApps.forEach((function(t){t.nodes.unshift({id:0,name:"全部"})}))):t.$message({type:"error",message:e.m,showClose:!0})}),(function(){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},search:function(){var t=this;this.$appFetch({url:"batchRecord",method:"post",data:{app_id:this.selectAppId,node_id:this.selectNodeId,p:this.p,page_size:10}},(function(e){0==e.e?(t.batchRecordData=e.d.data,t.total=e.d.total):t.$message({type:"error",message:e.m,showClose:!0})}),(function(){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},refresh:function(t){var e=this;this.$appFetch({url:"restBatchNew",method:"post",data:{id:t}},(function(t){0==t.e?(e.$message.success("操作成功"),e.search()):e.$message({type:"error",message:t.m,showClose:!0})}),(function(){e.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},delBatch:function(t){var e=this;this.$appFetch({url:"delBatch",method:"post",data:{id:t}},(function(t){0==t.e?e.$message.success("删除成功"):e.$message({type:"error",message:t.m,showClose:!0}),e.search()}),(function(){e.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},searchs:function(){this.p=1,this.search()},reset:function(){this.p=1,this.selectAppId=0,this.selectNodeId=0,this.batchNodes=[{id:0,name:"全部"}],this.search()},detal:function(t){this.nowErrorData=Object(n["a"])(Object(n["a"])({},t),{},{errorLost:[]}),this.result=t.result,this.shouSearch=!1}}}),C=b,k=Object(u["a"])(C,f,g,!1,null,null,null),y=k.exports,S=(s("e9c4"),s("7db0"),s("00b4"),s("25f0"),s("d81d"),s("702e")),x=s("e673"),w=s("bc91"),T=s("e9e4"),P=s("2f62"),N={data:function(){return{isCheckAll:!1,thirdCheckAll:!1,selectTaskList:[],thirdSelectTaskList:[],mutilType:"page",batchPop:!1,checkShow:!1,batchSuccessPop:!1,examineTypes:{0:"终止",1:"同意",2:"驳回",3:"提交",4:"跳转","-5":"代处理"},nowType:"",batchComment:"",batchCommentThird:"",hasChooseUser:{},showBatchRecordCom:!1,showSelectEx:!1,uploadUserPop:{isShow:!1,status:"",uploadUserFile:0},uploadUserResultPop:{isShow:!1,resMessage:"",errorFile:""},thirdCheck:!1,operation:""}},props:{status:{},OperationList:{default:[]},list:{default:[]},total:{default:0},batchAuth:{default:[]},classHead:{default:""},batchSearchP:{type:Object,default:function(){return{}}},thirdSearchP:{type:Object,default:function(){return[]}},is_advanced_component:{default:""},advanced_component:{default:""}},computed:Object(n["a"])({},Object(P["d"])("matter",["nodeDatas","selectNodeUid","sms_send"])),filters:{matterName:function(t){return t.task_name?t.task_name:t.app_name?t.app_name:t.thirdparty_name}},watch:{"uploadUserPop.isShow":function(t){t||(this.uploadUserPop.status="")},OperationList:function(t){console.log(t)}},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(P["c"])("matter",["SET_NODEDATAS","SET_SELECTUIDS","SET_SMSSEND"])),Object(P["b"])("matter",["clearUserSelectInfo"])),{},{uploadClick:function(){this.$router.push({path:"/site/ucenter",query:{showroute:"sealInfo"}}),this.checkShow=!1},showTypeTime:function(t){return this.$appCommonH.getTodoStatus(t)?"到达于：".concat(this.mixSetTime(t.task_created)):"处理于：".concat(this.mixSetTime(t.task_finished))},timeConsuming:function(t){return this.$appCommonH.getSpendTime(this.mixSetTime(t.task_created),this.mixSetTime(t.task_finished))},toExaminePath:function(t,e){t.preventDefault(),window.open(this.toExamineParam(e),this.mixMatterTodoOpenBlank?"_blank":"_self")},toExamineParam:function(t){var e="",s="";return this.$appCommonH.isWeixin().isPhone?(e="/matter/m_examine",s="/matter/m_rejectStep"):(e="/matter/examine",s="/matter/rejectStep"),this.$router.resolve({path:t.node_config&&t.node_config.steps&&t.node_config.steps.length>1?s:e,query:{app_id:t.app_id,node_id:t.node_id,type:t.flags.includes(5)?"reject":"todo",task_id:t.task_id,inst_id:t.inst_id,id:1==this.$appCommonH.getSignValue(t)?t.id:void 0,sign:this.$appCommonH.getSignValue(t),changeStatus:this.status}}).href},revoke:function(t){var e=this;this.$confirmTips("确定收回该任务？").then((function(s){e.$appFetch({url:"revokeTodo",method:"POST",data:{task_id:t.task_id}}).then((function(s){s.e?e.$message({type:"error",message:s.m}):(e.$message({type:"success",message:s.m}),e.$router.push({path:e.$appCommonH.isWeixin().isPhone?"/matter/m_examine":"/matter/examine",query:{type:"todo",task_id:s.d.task_id,inst_id:t.inst_id}}))}))}))},checkAllChange:function(){var t=this;this.selectTaskList=[],this.isCheckAll&&this.list.forEach((function(e){t.selectTaskList.push(e.task_id)}))},checkAllChangeThird:function(){var t=this;this.thirdSelectTaskList=[],this.thirdCheckAll&&this.list.forEach((function(e){t.thirdSelectTaskList.push(e.task_id)}))},checkChange:function(){this.isCheckAll=0!=this.list.length&&this.selectTaskList.length==this.list.length},checkChangeThird:function(){this.thirdCheckAll=0!=this.list.length&&this.thirdSelectTaskList.length==this.list.length},showBatchPop:function(t){var e=this;if(!this.selectTaskList.length&&!this.uploadUserPop.uploadUserFile)return this.$message({type:"error",message:"请先选择可批量审批的任务或上传审批用户",showClose:!0}),!1;1==this.is_advanced_component?this.$appFetch({url:"getCheck",method:"get",data:{component:this.advanced_component}},(function(s){1==s.d?(e.setBatchComment(t),e.nowType=t,e.batchPop=!0):e.checkShow=!0}),(function(t){e.$message.error("数据请求失败，请重新进入页面或点击按钮")})):(this.setBatchComment(t),this.nowType=t,this.batchPop=!0)},showthirdPop:function(t,e){if(this.operation=JSON.stringify(e),!this.thirdSelectTaskList.length)return this.$message({type:"error",message:"请先选择可批量处理的任务",showClose:!0}),!1;this.nowType=t,this.batchPop=!0},setBatchComment:function(t){var e=this.batchAuth.newCustom.find((function(e){return e.value==t})),s=e&&e.opinion_config&&e.opinion_config.value&&!/\{(.*)\}/.test(e.opinion_config.value);this.batchComment=s?e.opinion_config.value:""},examine:function(t){var e=this;if("0"!=this.nowType||this.batchComment||!this.mixGetConfig("mixBatchCommentIsRequired",this.list[0].app_id))if(2==t){var s={app_id:this.thirdSearchP.appId,app_name:this.thirdSearchP.appName,node_id:this.thirdSearchP.nodeId,node_name:this.thirdSearchP.name,task_ids:this.thirdSelectTaskList,comment:this.batchCommentThird,operation:this.operation};this.$appFetch({url:"getThirdCommit",method:"POST",data:s}).then((function(t){0==t.e?(e.$message({type:"success",message:"提交成功",showClose:!0}),e.batchPop=!1,e.showBatchRecordCom=!0,e.$emit("updateList")):e.$message({type:"error",message:t.m,showClose:!0})})).catch((function(t){e.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))}else{var a="",i={event_key:this.getBatchKey()},o={name:this.examineTypes[this.nowType],type:this.nowType,value:this.nowType};if(!this.$appCommonH.isEmptyObj(this.selectNodeUid)||!this.$appCommonH.isEmptyObj(this.sms_send))for(var r in o.special_approver=[],this.nodeDatas){var c=this.nodeDatas[r],l={node_key:c.node_key};this.selectNodeUid[c.node_key]&&(l.uids=this.selectNodeUid[c.node_key]),this.sms_send[c.node_key]&&(l.sms_send=this.sms_send[c.node_key]),o.special_approver.push(l)}this.uploadUserPop.uploadUserFile?(a="toBatchByImport",i.node_id=this.batchSearchP.nodeId,i.file=this.uploadUserPop.uploadUserFile):"all"==this.mutilType&&this.isCheckAll?(a="toBatchByNodeId",i.node_id=this.batchSearchP.nodeId,this.batchSearchP.departId&&(i.depart_id=this.batchSearchP.departId)):(a="toBatchByTaskIds",i.task_id=this.selectTaskList),"-5"==this.nowType&&(o.param={uid:this.hasChooseUser.id}),this.batchComment&&(i.comment=this.batchComment),i.operation=o,this.$appFetch({url:a,data:i,method:"POST"}).then((function(t){e.clearUserSelectInfo(),0==t.e?(e.uploadUserPop.uploadUserFile?(e.uploadUserResultPop=Object(n["a"])(Object(n["a"])({},e.uploadUserResultPop),t.d),e.uploadUserResultPop.isShow=!0,e.uploadUserPop.uploadUserFile=0):(e.isCheckAll=!1,e.showBatchRecordCom=!0,e.selectTaskList=[]),e.batchPop=!1,e.$emit("updateList")):"10100"==t.e?(e.batchPop=!1,e.selecExUser(t.d)):e.$message({type:"error",message:t.m,showClose:!0})})).catch((function(t){e.clearUserSelectInfo(),e.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))}else this.$message.warning("请输入处理意见")},getBatchKey:function(){return this.nowBatchKey=(new Date).getTime()+Math.ceil(1e4*Math.random()).toString(),this.nowBatchKey},selecExUser:function(t){var e={},s={};this.SET_NODEDATAS(t.nodes),this.nodeDatas.forEach((function(t){t.users&&t.users.length&&(e[t.node_key]=t.users.map((function(t){return t.uid}))),2==t.sms_permit&&(s[t.node_key]=0)})),this.SET_SELECTUIDS(e),this.SET_SMSSEND(s),this.showSelectEx=!0},submitExUser:function(t){return t?!!this.checkExUser()&&(this.showSelectEx=!1,void this.examine()):(this.showSelectEx=!1,this.SET_NODEDATAS([]),this.SET_SELECTUIDS({}),this.SET_SMSSEND({}),!1)},checkExUser:function(){var t={};for(var e in this.nodeDatas.forEach((function(e){t[e.node_key]=e.node_name})),this.selectNodeUid)if(!this.selectNodeUid[e].length)return this.$message({type:"error",message:"请先选择"+t[e]+"节点审批人",showClose:!0}),!1;return!0},selectUser:function(t){this.hasChooseUser=t,this.$refs.userSearchCom.close(),this.showBatchPop("-5")},upload:function(t){var e=this;this.$refs.uploadUserFile.files[0]&&Object(T["a"])(this.$refs.uploadUserFile.files[0],"all").then((function(t){"SUCCESS"==t.state?(e.uploadUserPop.uploadUserFile=t.url,e.uploadUserPop.status="success",e.selectTaskList=[],e.isCheckAll=!1):e.uploadUserPop.status="error",e.$refs.uploadUserFile.value=""}),(function(t){console.log("req",t)}))}}),mixins:[S["a"],x["a"],w["a"]]},$=(s("4444"),Object(n["a"])(Object(n["a"])({},N),{},{components:{nextNode:c["a"],userSearchCom:v,batchRecordCom:y}})),U=$,L=Object(u["a"])(U,o,r,!1,null,null,null),I=L.exports,A=s("ced5"),D=(s("a9e3"),s("4de4"),s("1276"),s("a15b"),s("4e82"),{data:function(){return{is_advanced_component:"",advanced_component:"",todoList:[],todoNums:{processNum:0,entrustNum:0,shareNum:0},p:1,pageSize:10,total:0,status:1,tabs:[{name:this.$t("system.matterTodoPending"),status:1,totalName:"processNum"},{name:this.$t("system.matterTodoBatch"),status:4},{name:"第三方事项批量处理",status:2},{name:this.$t("system.matterTodoProcessed"),status:3},{name:"委托待处理",status:7,totalName:"entrustNum"},{name:"委托已处理",status:8},{name:"共享已处理",status:9}],entrustNums:{todo:0,processed:0},searchP:{app_id:"",keyword:"",keyword_type:"user",time_type:0,time_lower:"",time_upper:"",y:"",department_id:"",flags:[],orderby:"createdDesc",class_name:""},batchApps:[],batchNodes:[],batchAuth:{},batchSearchP:{appId:"",nodeId:"",departId:"",class_name:""},thirdApps:[],thirdAppsList:[],thirdNodes:[],thirdSearchP:{appId:"",nodeId:"",departId:"",name:"",appName:""},OperationList:[],loading:!0,departNameList:[],showBatchRecordCom:!1,batchRecord:[],classNameList:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(P["d"])("matter",["nodeDatas","selectNodeUid","sms_send"])),{},{statusText:function(){return 3==this.status?"已":"待"}}),created:function(){this.$route.query.changeStatus&&(this.status=this.$route.query.changeStatus),"select"===this.mixDepartTreeSearch&&this.getDepartNameList(),window.localStorage.getItem("taskCenter_taskSort")&&(this.searchP.orderby=window.localStorage.getItem("taskCenter_taskSort"))},mounted:function(){4!=this.status&&this.getTodo(),this.getThirdApps(),this.getBatchApps(),this.getProcessAppNames(),this.getProcessNum(),this.getBatchRecord()},methods:Object(n["a"])(Object(n["a"])({},Object(P["c"])("matter",["SET_NODEDATAS","SET_SELECTUIDS","SET_SMSSEND"])),{},{getProcessAppNames:function(){var t="";switch(this.status){case 1:t="todo";break;case 3:t="finished";break}t&&this.mixGetProcessAppNames(t)},getProcessNum:function(){var t=this;this.$appFetch({url:"getTodoEntrustNum",method:"GET"}).then((function(e){0==e.e&&(t.todoNums.processNum=e.d.todo,t.todoNums.entrustNum=e.d.entrust,t.entrustNums.todo=e.d.entrust,t.entrustNums.processed=e.d.entrust_finished,t.todoNums.shareNum=e.d.share)}))},isShowTab:function(t){switch(t){case 1:case 3:return!0;case 2:return!!this.thirdApps.length;case 4:return!!this.batchApps.length;case 7:return!!this.entrustNums.todo;case 8:return!!this.entrustNums.processed;case 9:return!!this.todoNums.shareNum}return!1},changeStatus:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.$refs.todoList.thirdSelectTaskList=[],this.$refs.todoList.selectTaskList=[],this.$refs.todoList.isCheckAll=!1,this.$refs.todoList.thirdCheckAll=!1,this.status=e,this.p=1,this.total=0,this.getProcessAppNames(),4!=this.status&&2!=this.status)this.getTodo();else{var s=(new Date).getTime();this.$setLastData({actionType:"setTime",time:s,dataKey:"todoList"}),this.$setLastData({actionType:"setData",time:s,dataKey:"todoList",newData:[],cb:function(){t.loading=!1}}),1==this.batchApps.length&&1==this.batchApps[0].nodes.length&&4==this.status&&(this.batchNodes=this.batchApps[0].nodes,this.batchSearchP.appId="".concat(this.batchApps[0].id,"_").concat(this.batchApps[0].bpmn_id),this.batchSearchP.nodeId=this.batchApps[0].nodes[0].id,this.batchNodeChange(),this.batchSearch()),this.thirdAppsList.length&&1==this.thirdAppsList.length&&1==this.thirdAppsList[0].nodes.length&&2==this.status&&(this.thirdNodes=this.thirdAppsList[0].nodes,this.thirdSearchP.appId=this.thirdAppsList[0].id,this.thirdSearchP.appName=this.thirdAppsList[0].name,this.thirdSearchP.nodeId=this.thirdAppsList[0].nodes[0].id,this.thirdSearchP.name=this.thirdAppsList[0].nodes[0].name,this.getThirdOperationKey()),(this.batchSearchP.nodeId&&4==this.status||this.thirdSearchP.nodeId&&2==this.status)&&this.batchSearch()}},getTodo:function(){var t=this,e=this.$appCommonH.copyObj(this.searchP);this.loading=!0;var s=(new Date).getTime();this.$setLastData({actionType:"setTime",time:s,dataKey:"todoList"});var a="";a=[7,8].includes(Number(this.status))?7==this.status?"getEntrustTodo":"getEntrustFinished":9==this.status?"shareTaskList":1==this.status?"getMyTodo":"getMyTodoFinished",this.$appFetch({url:a,method:"get",data:Object(n["a"])({p:this.p,page_size:this.pageSize},e)}).then((function(e){e.e?t.$message({type:"error",message:e.m,showClose:!0}):t.$setLastData({actionType:"setData",time:s,dataKey:"todoList",newData:e.d.list,cb:function(){t.loading=!1,t.total=e.d.total,t.classNameList=e.d.all_class;var s=t.tabs.filter((function(e){return e.status==t.status}))[0].totalName;s&&(t.todoNums[s]=e.d.total)}})})).catch((function(e){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},handleCurrentChange:function(t){this.p=t,4==this.status||2==this.status?this.getBatch():this.getTodo()},handleSizeChange:function(t){this.p=1,this.pageSize=t,4==this.status||2==this.status?this.getBatch():this.getTodo()},search:function(){this.p=1,this.getTodo(),window.localStorage.setItem("taskCenter_taskSort",this.searchP.orderby)},reset:function(){this.searchP={app_id:"",keyword:"",keyword_type:"user",time_type:0,time_lower:"",time_upper:"",y:"",department_id:"",flags:[],orderby:"createdDesc",class_name:""},this.p=1,this.getTodo()},getThirdApps:function(){var t=this;this.$appFetch({url:"getThirdList",method:"GET"}).then((function(e){e.e?t.$message({type:"error",message:e.m,showClose:!0}):(t.thirdApps=e.d.map((function(t){return{label:t.name,value:t.id}})),t.thirdAppsList=e.d)})).catch((function(e){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},getBatchApps:function(){var t=this;this.$appFetch({url:"getBatchNodes",method:"GET"}).then((function(e){e.e?t.$message({type:"error",message:e.m,showClose:!0}):t.batchApps=e.d.apps})).catch((function(e){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},getBatchRecord:function(){var t=this;this.$appFetch({url:"batchRecord",method:"GET",data:{app_id:0,node_id:0,p:1,page_size:10}}).then((function(e){e.e?t.$message({type:"error",message:e.m,showClose:!0}):t.batchRecord=e.d.data})).catch((function(e){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},getDepartNameList:function(){var t=this;this.$appFetch({url:"getDepartNameList",method:"GET"}).then((function(e){e.e?t.$message({type:"error",message:e.m,showClose:!0}):t.departNameList=e.d.list})).catch((function(e){t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},getBatch:function(){var t=this,e={p:this.p,page_size:this.pageSize,node_id:this.batchSearchP.nodeId,department_id:this.batchSearchP.departId,class_name:this.batchSearchP.class_name},s={p:this.p,page_size:this.pageSize,node_id:this.thirdSearchP.nodeId,app_id:this.thirdSearchP.appId,department_id:this.thirdSearchP.departId,type:2};this.loading=!0;var a=(new Date).getTime();this.$setLastData({actionType:"setTime",time:a,dataKey:"todoList"}),this.$appFetch({url:"getMyTodo",method:"get",data:4==this.status?e:s}).then((function(e){var s,i;t.is_advanced_component=e.d.list[0]?null===(s=e.d.list[0].node_config)||void 0===s?void 0:s.is_advanced_component:[],t.advanced_component=e.d.list[0]?null===(i=e.d.list[0].node_config)||void 0===i?void 0:i.advanced_component:[],e.e?t.$message({type:"error",message:e.m,showClose:!0}):t.$setLastData({actionType:"setData",time:a,dataKey:"todoList",newData:e.d.list,cb:function(){t.loading=!1,t.total=e.d.total}})})).catch((function(e){console.log(e),t.$message({type:"error",message:"数据请求失败，请重新进入页面或点击按钮",showClose:!0})}))},batchSearch:function(t){4==t&&!this.batchSearchP.nodeId||2==t&&!this.thirdSearchP.nodeId?this.$message({type:"error",message:"请选择审批环节"}):(this.p=1,this.getBatch(),2==t&&this.getThirdOperationKey())},batchReset:function(t){this.p=1,this.total=0,this.todoList=[],4==t?this.batchSearchP={appId:"",nodeId:"",departId:""}:(this.thirdNodes=[],this.thirdSearchP={appId:"",nodeId:"",departId:""})},batchAppChange:function(){var t=this;this.$refs.todoList.typemutilType="page",this.$refs.todoList.isCheckAll=!1,this.$refs.todoList.selectTaskList=[],this.batchSearchP.nodeId="",this.batchNodes=[],this.todoList=[],this.total=0,this.p=1;var e=this.batchSearchP.appId.split("_")[0],s=this.batchSearchP.appId.split("_")[1];this.batchApps.forEach((function(a){a.id==e&&a.bpmn_id==s&&(t.batchNodes=a.nodes)}))},thirdAppChange:function(t){var e=this;this.$refs.todoList.typemutilType="page",this.$refs.todoList.isCheckAll=!1,this.$refs.todoList.selectTaskList=[],this.thirdSearchP.nodeId="",this.thirdNodes=[],this.todoList=[],this.total=0,this.p=1,this.thirdAppsList.map((function(s){t==s.id&&(e.thirdNodes=s.nodes)}))},thirdNodeChange:function(t){this.thirdSearchP.nodeId=t,this.thirdSearchP.name=this.thirdNodes.map((function(e){if(e.id==t)return e.name})),this.thirdSearchP.name=this.thirdSearchP.name.join("")},getThirdOperationKey:function(){var t=this,e={node_id:this.thirdSearchP.nodeId,app_id:this.thirdSearchP.appId,node_name:this.thirdSearchP.name};this.$appFetch({method:"get",url:"getThirdOperation",data:e},(function(e){0==e.e&&(t.OperationList=e.d)}))},batchNodeChange:function(){var t=this;this.$refs.todoList.mutilType="page",this.$refs.todoList.isCheckAll=!1,this.$refs.todoList.selectTaskList=[],this.todoList=[],this.total=0,this.p=1,this.batchNodes.forEach((function(e){e.id==t.batchSearchP.nodeId&&(t.batchAuth=e.auth,t.batchAuth.deal=t.batchAuth.common.deal?t.batchAuth.common.deal:[],t.batchAuth.newCustom=t.batchAuth.custom.filter((function(t){return-1!=t.sort})).sort((function(t,e){return t.sort-e.sort})))}))}}),mixins:[S["a"],x["a"],w["a"]]}),E=s("ff0d"),O=(s("8c64"),Object(n["a"])(Object(n["a"])({},D),{},{components:{departSearch:A["a"],matterNav:E["a"],todoList:I,batchRecordCom:y}})),B=O,j=Object(u["a"])(B,a,i,!1,null,null,null);e["default"]=j.exports},ff0d:function(t,e,s){"use strict";s("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"matterNav"},[t._l(t.matterShowList,(function(s){return e("router-link",{key:s.path,class:{active:s.path==t.$route.path},attrs:{to:s.path,tag:"div"}},[t._v("\n      "+t._s(s.name)+"\n    ")])})),t._v(" "),t.mixShowMessageInTask?e("router-link",{key:"/matter/message",class:{active:"/matter/message"==t.$route.path},attrs:{to:"/matter/message",tag:"div"}},[t._v("\n    我的消息\n    ")]):t._e()],2)},i=[],n=s("5797"),o=(s("d3b7"),s("159b"),s("caad"),s("2532"),s("6efe")),r=s("e87b"),c={data:function(){return{matterShowList:[]}},mixins:[o["a"],r["a"]],created:function(){},mounted:function(){var t=this;if(this.getActiveUser(),this.mixTwoMenuShow)this.matterShowList=Object(n["a"])(this.mixMatterNavList);else{var e=JSON.parse(window.localStorage.getItem("secondaryNav"));e?this.setNav(e):this.$appFetch({method:"get",url:"getUserWebShow"},(function(e){0==e.e?t.setNav(e.d):t.$message.warning(e.m)}),(function(e){t.$message.error({message:e})}))}},methods:{setNav:function(t){var e=this;this.mixMatterNavList.forEach((function(s){(t.includes(s.authKey)||void 0===s.authKey)&&e.matterShowList.push(s)}))}}},l=c,d=(s("5d16"),s("0b56")),h=Object(d["a"])(l,a,i,!1,null,null,null);e["a"]=h.exports}}]);