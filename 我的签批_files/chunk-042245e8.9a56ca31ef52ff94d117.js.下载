(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-042245e8"],{"46b4":function(t,e,s){},"4caf":function(t,e,s){"use strict";s("b0c0");var n=function(){var t=this,e=t._self._c;return t.pop?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"process_log_pop"},[e("div",{staticClass:"log_pop_top"},[e("div",{staticClass:"content_w"},[e("span",[t._v(t._s(t.appName))]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:t.close}},[t._v("关闭")])],1)]),t._v(" "),e("div",{staticClass:"process_log_pop_main"},[e("ul",t._l(t.log,(function(s,n){return e("li",{key:n},[e("div",{staticClass:"main_line"},[0!=n?e("span",{staticClass:"line line_top"}):t._e(),t._v(" "),e("span",{staticClass:"circular",class:t._f("circularClass")(s)}),t._v(" "),n<t.log.length-1?e("span",{staticClass:"line line_bottom"}):t._e()]),t._v(" "),e("div",{staticClass:"main_log"},[s.sign_log&&s.sign_log.length?t._l(s.sign_log,(function(n,i){return e("div",{key:i,staticClass:"log"},[e("div",{staticClass:"title",class:t._f("titleBgHandle")(n)},[e("p",{staticClass:"title_1 ellipsis",attrs:{title:t._f("nodeNameHandle")(s)}},[t._v(t._s(t._f("nodeNameHandle")(s)))]),t._v(" "),"string"==typeof n.userName?[e("p",{staticClass:"title_2 ellipsis"},[e("span",[t._v(t._s(n.userName))]),t._v(" "),e("span",{attrs:{title:n.userDepartment}},[t._v(t._s(n.userDepartment))])])]:t._l(n.userName,(function(n,i){return e("p",{key:i,staticClass:"title_2 ellipsis"},[e("span",[t._v(t._s(n.user_name))]),t._v(" "),e("span",{attrs:{title:s.userDepartment}},[t._v(t._s(n.user_department_name))])])}))],2),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"content_desc"},[t._v("\n                    操作意见：\n                    "),e("span",[t._v(t._s(t._f("signLogDescHandle")(n.operation_desc)))])]),t._v(" "),n.created?e("p",{staticClass:"content_time"},[t._v("时间："+t._s(n.created))]):t._e(),t._v(" "),n.comment?e("p",{staticClass:"content_comment"},[t._v(t._s(n.comment))]):t._e(),t._v(" "),n.attachments.length?e("div",{staticClass:"content_file ellipsis"},t._l(n.attachments,(function(s,n){return e("a",{key:n,attrs:{href:t.setAttachmentsUrl(s),target:"_blank"}},[e("i",{staticClass:"el-icon-paperclip"}),t._v("\n                      "+t._s(s.name)+"\n                    ")])})),0):t._e()]),t._v(" "),e("div",{staticClass:"log_line"})])})):t._e(),t._v(" "),e("div",{staticClass:"log"},[e("div",{staticClass:"title",class:t._f("titleBgHandle")(s)},[e("p",{staticClass:"title_1 ellipsis",attrs:{title:t._f("nodeNameHandle")(s)}},[t._v(t._s(t._f("nodeNameHandle")(s)))]),t._v(" "),"string"==typeof s.userName?[e("p",{staticClass:"title_2 ellipsis"},[e("span",[t._v(t._s(s.is_entrust?s.entrust_user:s.userName))]),t._v(" "),e("span",{attrs:{title:s.userDepartment}},[t._v(t._s(s.userDepartment))])])]:t._l(s.userName,(function(n,i){return e("p",{key:i,staticClass:"title_2 ellipsis"},[e("span",[t._v(t._s(n.user_name))]),t._v(" "),e("span",{attrs:{title:s.userDepartment}},[t._v(t._s(n.user_department_name))])])}))],2),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"content_desc"},[t._v("\n                  操作意见：\n                  "),e("span",[t._v(t._s(t._f("handleDesc")(s)))])]),t._v(" "),s.created?e("p",{staticClass:"content_time"},[t._v("时间："+t._s(s.created))]):t._e(),t._v(" "),s.comment?e("p",{staticClass:"content_comment"},[t._v(t._s(s.comment))]):t._e(),t._v(" "),s.attachments.length?e("div",{staticClass:"content_file ellipsis"},t._l(s.attachments,(function(s,n){return e("a",{key:n,attrs:{href:t.setAttachmentsUrl(s),target:"_blank"}},[e("i",{staticClass:"el-icon-paperclip"}),t._v("\n                    "+t._s(s.name)+"\n                  ")])})),0):t._e(),t._v(" "),s.is_entrust?e("p",{staticClass:"content_comment"},[t._v("来自"+t._s(s.userName)+"的委托审批")]):t._e()])])],2)])})),0),t._v(" "),t.loading||t.log.length?t._e():e("p",[t._v("暂无处理记录")])])]):t._e()},i=[],a=s("9192"),o=s("1b63"),l=s("702e"),r=s("e673"),c=null,d={data:function(){return{instId:0,appId:0,appName:"",log:[],pop:!1,loading:!0}},created:function(){c=this},filters:{circularClass:function(t){return"撤销"==t.operation_desc&&"RevokeEvent"==t.node_id?"label_2":t.operation_desc?"label_1":"label_2"},nodeNameHandle:function(t){switch(t.node_id){case"StartEvent":return"发起申请";case"RevokeEvent":return"发起者撤销";default:return t.nodeName}},titleBgHandle:function(t){return"撤销"==t.operation_desc&&"RevokeEvent"==t.node_id?"title_bg2":t.operation_desc||t.is_revoke?"title_bg1":"title_bg2"},titleHandle:function(t){return"StartEvent"==t.node_id?"申请":t.is_revoke?"收回":t.is_entrust?"委托审批":t.is_delegate&&"代处理"!=t.operation_desc?"代处理":"审批"},signLogTitleBgHandle:function(t){return"加签"!=t.operation_desc?"title_bg4":"title_bg2"},signLogTitleHandle:function(t){return"加签"!=t.operation_desc?c.mixGetConfig("mixCountersigntext",c.appId).btnText+"审批":"审批"},signLogDescHandle:function(t){return"加签"==t?c.mixGetConfig("mixCountersigntext",c.appId).btnText:"已加签"==t?c.mixGetConfig("mixCountersigntext",c.appId).already:t||"等待中"},handleDesc:function(t){return t.is_revoke?"收回":t.operation_desc?t.operation_desc:"等待中"}},methods:{show:function(t,e,s,n){var i=this;this.instId=t,this.appId=e,this.appName=n,this.pop=!0,this.$appFetch({url:s?"getThirdpartyLog":"getProcessLog",method:"GET",data:{inst_id:this.instId}},(function(t){if(0==t.e){if(i.log=t.d.lists,!i.log.length)return i.$message.warning("暂无处理记录"),void(i.loading=!1);i.loading=!1}else i.$message.warning(t.m)}),(function(t){i.$message.error(t)}))},setAttachmentsUrl:function(t){return this.$appCommonH.getUrlStr(o["a"].getApi("downloadAuth"),{file_id:t.file_id,inst_id:this.instId})},close:function(){this.pop=!1,this.loading=!0,this.instId=0,this.appId=0,this.log=[]}},mixins:[l["a"],r["a"]]},_=(s("46b4"),Object(a["a"])({},d)),p=_,g=s("0b56"),u=Object(g["a"])(p,n,i,!1,null,null,null);e["a"]=u.exports},"7b38":function(t,e,s){"use strict";s("b0c0"),s("ac1f"),s("1276");var n=function(){var t=this,e=t._self._c;return t.pop?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"process_svg_pop"},[e("div",{staticClass:"svg_pop_top"},[e("div",{staticClass:"content_w"},[e("span",[t._v(t._s(t.appName))]),t._v(" "),e("zlButton",{attrs:{widthType:"fixed"},on:{click:t.close}},[t._v("关闭")])],1)]),t._v(" "),e("div",{staticClass:"svg_pop_svg",on:{mouseleave:function(e){return t.hideBpmn(e)}}},[e("div",{domProps:{innerHTML:t._s(t.svg)},on:{mouseover:function(e){return t.getTag(e)}}})]),t._v(" "),e("div",{staticClass:"svg_pop_bottom"},[e("span",{staticClass:"icon",on:{click:t.handleMinus}},[e("i",{staticClass:"iconfont iconfangdajing2"})]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.num)+"%")]),t._v(" "),e("span",{staticClass:"icon",on:{click:t.handlePlus}},[e("i",{staticClass:"iconfont iconfangdajing1"})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showBpmn&&""!=t.assignee,expression:"showBpmn && assignee != ''"}],staticClass:"svg_pop_user"},t._l(t.assignee,(function(n,i){return e("div",{key:i,staticClass:"node-item-pop",style:{height:"auto"}},["listener"!==n.type?[1==n.sex?e("img",{staticClass:"small-head",attrs:{src:s("b06a")}}):2==n.sex?e("img",{staticClass:"small-head",attrs:{src:s("c0a0")}}):n.avatar?e("img",{staticClass:"small-head",attrs:{src:n.avatar}}):e("img",{staticClass:"small-head",attrs:{src:s("a423"),alt:""}}),t._v(" "),e("span",{staticClass:"ellipsis"},[t._v(t._s(n.name))]),t._v(" "),n.department?e("p",{staticClass:"ellipsis"},[t._l(n.department.split(","),(function(s){return[t._v("\n            "+t._s(s)+"\n            "),e("br")]}))],2):t._e()]:e("div",t._l(n.users,(function(n,i){return e("div",{key:i,staticClass:"node-item-pop"},[e("img",{staticClass:"small-head",attrs:{src:s("a423"),alt:""}}),t._v(" "),e("span",{staticClass:"ellipsis"},[t._v(t._s(n.name))]),t._v(" "),n.depart_name?e("p",{staticClass:"ellipsis"},[t._v(t._s(n.depart_name))]):t._e()])})),0)],2)})),0)]):t._e()},i=[],a=s("9192"),o=s("26b6"),l=s("76eb"),r=(s("5319"),s("4d63"),s("c607"),s("2c3e"),s("25f0"),s("caad"),s("2532"),s("99af"),{data:function(){return{pop:!1,svg:"",nodes:[],currNode:[],historyNodes:[],appName:"",isSuspend:0,assignee:[],num:100,minWidth:0,minHeight:0,showBpmn:0,loading:!1}},methods:{show:function(t){var e=this;return Object(l["a"])(Object(o["a"])().mark((function s(){var n,i,a;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=t,e.pop=!0,t.svg){s.next=13;break}return e.loading=!0,s.next=6,e.$appFetch({url:"dealInfo",method:"get",data:t});case 6:if(i=s.sent,e.loading=!1,!i.e){s.next=11;break}return e.$message.warning(i.m),s.abrupt("return");case 11:n=i.d,n.is_suspend=i.d.inst.is_suspend;case 13:a=n.svg.replace(/height="([0-9]*)"/,"setHeight"),e.svg=a.replace("setHeight",'height="'.concat(+RegExp.$1+30,'"')),e.appName=n.name,e.nodes=n.nodes,e.isSuspend=n.is_suspend,e.currNode=n.curr_node?n.curr_node:[],e.historyNodes=n.history_nodes?n.history_nodes:[],e.$nextTick((function(){this.minWidth=$(".svg_pop_svg svg").width(),this.minHeight=$(".svg_pop_svg svg").height(),this.setNodeStyle()}));case 21:case"end":return s.stop()}}),s)})))()},setNodeStyle:function(){if(this.currNode.length||this.historyNodes.length)for(var t in this.nodes)this.currNode.includes(this.nodes[t].node_id)?this.setCurrNodeStyle(this.nodes[t]):this.historyNodes.includes(this.nodes[t].node_id)&&this.setHistoryNodeStyle(this.nodes[t])},setCurrNodeStyle:function(t){var e=$('g[data-element-id="'+t.act_node_id+'"]');if(e.addClass("ele_runing"),document.createElementNS){var s=document.createElementNS("http://www.w3.org/2000/svg","image"),n="";n=this.isSuspend?"".concat(appConfig.staticUrl,"img/svg_suspend.gif?v=").concat((new Date).getTime()):"".concat(appConfig.staticUrl,"img/svg_curr.gif?v=").concat((new Date).getTime()),s.href.baseVal=n,s.setAttribute("width","80"),s.setAttribute("height","30"),s.setAttribute("x","50"),s.setAttribute("y","-17"),$(".ele_runing").append(s)}},setHistoryNodeStyle:function(t){var e=$('g[data-element-id="'+t.act_node_id+'"]');e.addClass("ele_green")},close:function(){this.svg="",this.nodes=[],this.appName="",this.pop=!1},handlePlus:function(){var t,e=$(".svg_pop_svg svg").width()+50,s=$(".svg_pop_svg svg").height()+50;$(".svg_pop_svg svg").css({width:e,height:s}),t=Math.floor(s/this.minHeight),t<=1&&(t=1),this.num=this.num+10*t},handleMinus:function(){if(!(this.num<=10)){var t;t=Math.floor($(".svg_pop_svg svg").height()/this.minHeight),t<=1&&(t=1),this.num=this.num-10*t;var e=$(".svg_pop_svg svg").width()-50,s=$(".svg_pop_svg svg").height()-50;$(".svg_pop_svg svg").css({width:e,height:s})}},getTag:function(t){var e,s=$("g");if(s.removeClass("ele_blue"),"rect"==t.target.localName||"text"==t.target.localName||"tspan"==t.target.localName){if("rect"==t.target.localName||"text"==t.target.localName?e=t.target.parentNode.parentNode:"tspan"==t.target.localName&&(e=t.target.parentNode.parentNode.parentNode),e.getAttribute("data-element-id")&&e.getAttribute("data-element-id").indexOf(!1))for(var n in this.nodes)if(this.nodes[n].act_node_id==e.getAttribute("data-element-id")){this.showBpmn=1,this.assignee=this.nodes[n].assignee;var i=e.getBoundingClientRect().top+70,a=e.getBoundingClientRect().left+80;a+220>window.innerWidth&&(a-=270),document.querySelector(".svg_pop_user").style.top=i+"px",document.querySelector(".svg_pop_user").style.left=a+"px";s=$('g[data-element-id="'+this.nodes[n].act_node_id+'"]');return void s.addClass("ele_blue")}}else this.showBpmn=0},hideBpmn:function(){this.showBpmn=0}}}),c=(s("7ff4"),Object(a["a"])({},r)),d=c,_=s("0b56"),p=Object(_["a"])(d,n,i,!1,null,null,null);e["a"]=p.exports},"7ff4":function(t,e,s){},a423:function(t,e,s){t.exports=s.p+"static/img/74266593210240702.201aff12.png"},b06a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADBklEQVRYR+2WT0gUcRTHv2921nZ3RqmU7GIHjYjqkGREYLVtEXiIungICTt46VBJ9E93rYl2U5KgvAcVdahDERUVlTuZUIf0YgRlWkREhyLEGXfT2Xkx/ol2XXdmdhEvzfV93/d9eO/3e78hLPBHC1wf/wHy6kBQ4cXwaOsFwjoQyphpjD3iHbXF99HtSF0BBBUuI1G/RISGbIWYcZMNqVlV6IdTEMcAtR2JFV7D6CaiqlzmzDw0IYqh3lP+L04gHAFYLRe8Wh9AlU5MAR4eF+Sa3hb6Zad3BBCKjSoAnbEzy4hf7g7LzXY5tgD1t9nz84P+DYRldmYZcX1RsVT66DD9zpVnC7DtfGKLh1M9LotPypk8wXir/0VBAMGo1igQruYFADTGw/L1ggBCUW0/CDlN5ipgMg6oEflaQQDBaKJWoNTLfDpgmqhT2+THBQFMHsJBfQSA5AaCgUTSL5W+OkqJggCs5O0x7QIBx10BMK7EI3KTXY7tLbAMNilcEhD1t0SosDOcjuuGKVb3tPkG7fSOACyTYFSvIfB9IizPuYqBhADseR6Wn9oVt+KOASzxZoWX+kStA0RNlCWXgc/Mwj41EnjtpLgjgGB7ciWlJk4woVttlW+BiLdGxypEmA1MvHHaZIBJ6PfJgSfW5rMerqKU0WakqKvntDyQ9yEMxrQjBHQS4J0y4Xdgio4Y0r0+hcYyjTcoHCj26gcJHCbQEjBMBkfjhnwWCpnZQLKOYK3CReWidgNE9VnpGeMM9IJ4kIDvU2xYw0AdEcmzchgPTEOqVxVKZsayAoRio3cB2ut0jk50DDyMt0q7rRH+q58FEIqNHgKoy4mpW40JHFPD8sU5AXbEtHIT+ESA3625E721HVkUVqknA19n9GkdCEX1CIjPOTErQJP2o5IBoPWDUF2AuW0qM7+PR4pXz+qAdYVKvLqWbcHYuroUjExI0sw1/tuBne3JStM0hlx65SUXBLHqWYtvOG0T7upkaTypTW62ef9S8htVIS0NYN6LzlHA1WM0H5B/AJ4OBzDZIIsNAAAAAElFTkSuQmCC"},c0a0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC5ElEQVRYR+2WP2gUURDGv7l9b4OJaGKC2sQiERGxMBAbMeAle4KCaJNCgsQijYWYQm1UVEwhiqDpBRUttFBEhcQ7E6IWKWKaqCAxUUTUQjBizOX2vduRPRLxcn/27V6Rxm3nm29+O+/N7BKW+aFlro//AJE6wMOo1Vps4xhtZY8bYoQ5Yen7FMf7sEcaCoCH0aCy8iqArhKF7khL9VIc301BjAE4iQ0uySECmsuZMzBls2qnBD6ZQBgB+C13s/IVAU0mpgxM21WqldrwI0hvBJBJinNEdDbILD/O12xH9wblBALwPViqTnwB0dogs7w482+pdD3tRaZcXiCASok2Bj0PVXxBTDHeJdv1SEUAbsrqBmI3ogCAvW47kb1VGcAz6xA4VtakdAHvsO1kb1YEoJJiJxO9iNIBAu+Rjh6oCGDhEv4EUU04CE7Lal1PO5CuCMBPzqTEJQKdCAeA67ajeoJyAqfAN+BRrHJ/yddEaAwyzMX9EWTdQrsxGaQ3AvBN3KeylWP8iEDry5tymoD90tHJoOJ+3Bgg92IDWKMseRHEPQAV5DLwkRgH7YQaNSluBMDD2Ki0PMnkDdkd2btEYB5Bo3ZFlwdsXyg0YVk8bs1nB/3N53+4FMkzzKq/KoGJyJfQTcljAF8GSOY6ALwFeX326uxDasXcUmMeQ7WeEUcYOAVQHZg9JvTZHfo8EbxiIEWPgN/Adr/K2wR0FqVndkF4CfAkM33LaYi2+HMP0MoCMPBj29KdFMf80lhRgExKPCDQAdNzNNEx8xPb0fv8I/xXXwDgJuVREPpNTMNqCHxcOvpKSQBOYZ2C+ADQirDmZnpOS0tvojg+L+rzOqCS4jQTXTAzi6rK/1HJA3BTchxAS1RrkzwG3lU5anNBB/wRUjNittiCMTEOo5G1qmZxjP92gFNoUpBTYYyiaiVUMzmYztuEPIgaHROLmy2qt1GeEHqM4pg1WsVGjhWIQn2MKqhTMvUPGX79IXZK25oAAAAASUVORK5CYII="}}]);